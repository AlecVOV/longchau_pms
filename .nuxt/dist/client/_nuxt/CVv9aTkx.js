import{B as J,r as d,c,j as K,x as W,u as X,a as i,b as t,m as l,e as M,w as V,t as p,d as T,f as g,v as N,D as y,E as R,F,g as $,k as Y,A as j,_ as ee,o as a,h as U,p as te,n as se}from"./4Al0cLfe.js";import{u as oe}from"./FiuJam0s.js";import le from"./Drma5A4u.js";const re={class:"py-8 md:py-12"},ne={class:"container mx-auto px-4"},ae={key:0,class:"flex justify-center items-center py-12"},ie={key:1,class:"text-center py-12"},de={key:2},ue={class:"mb-8"},ce={class:"flex mb-4","aria-label":"Breadcrumb"},me={class:"inline-flex items-center space-x-1 md:space-x-3"},pe={class:"inline-flex items-center"},ge={class:"flex items-center"},ve={class:"flex items-center"},fe={class:"ml-1 text-gray-500 md:ml-2"},xe={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 mb-8"},be={class:"flex flex-col md:flex-row md:items-center md:space-x-6"},ye={key:0,class:"flex-shrink-0 mb-4 md:mb-0"},he=["src","alt"],we={class:"flex-1"},_e={class:"text-3xl font-bold text-gray-900 mb-2"},ke={class:"text-gray-600 text-lg mb-4"},Ce={class:"flex items-center text-sm text-gray-500"},Pe={class:"bg-white rounded-lg shadow-sm p-6 mb-8"},Le={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Be={class:"md:col-span-2"},Se={class:"relative"},Me=["placeholder"],Ve=["value"],Ne={class:"mt-4 pt-4 border-t border-gray-200"},Fe={class:"flex flex-wrap gap-4 items-center"},$e={class:"flex items-center"},je={class:"flex items-center"},Ue={class:"flex items-center"},Oe={class:"flex items-center space-x-2"},ze={key:0,class:"flex justify-center items-center py-12"},Ae={key:1,class:"text-center py-12"},De={key:2},He={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8"},Te={key:0,class:"flex justify-center"},Re={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Ee=["disabled"],Ie=["onClick"],Ze=["disabled"],Ke={__name:"[slug]",setup(qe){const O=J(),k=oe(),P=d(!0),L=d(!1),n=d(null),m=d([]),x=d(""),b=d(""),C=d("name"),h=d(!1),w=d(!1),_=d(!1),v=d({min:0,max:1e3}),E=c(()=>O.params.slug),I=c(()=>m.value.length?[...new Set(m.value.map(e=>e.brand))].sort():[]),z=c(()=>m.value.length),Z=c(()=>m.value.filter(s=>s.stock>0).length),A=c(()=>{let s=[...m.value];if(x.value.trim()){const e=x.value.toLowerCase();s=s.filter(r=>r.name.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||r.tags.some(o=>o.toLowerCase().includes(e)))}return b.value&&(s=s.filter(e=>e.brand===b.value)),h.value&&(s=s.filter(e=>e.stock>0)),w.value&&(s=s.filter(e=>e.featured)),_.value&&(s=s.filter(e=>e.discount>0)),s=s.filter(e=>e.price>=v.value.min&&e.price<=v.value.max),s}),u=c(()=>k.pagination),q=c(()=>{const s=u.value.currentPage,e=u.value.totalPages,r=[],o=Math.max(1,s-2),H=Math.min(e,s+2);for(let S=o;S<=H;S++)r.push(S);return r}),D=async()=>{P.value=!0;try{if(await k.fetchCategories(),n.value=k.categories.find(s=>s.slug===E.value),n.value){L.value=!0;const s=await $fetch(`/api/categories/${n.value.id}/products`);m.value=s.products||[]}}catch(s){console.error("Error fetching category data:",s)}finally{P.value=!1,L.value=!1}},f=()=>{},Q=()=>{const s=[...m.value];switch(C.value){case"name":s.sort((e,r)=>e.name.localeCompare(r.name));break;case"name-desc":s.sort((e,r)=>r.name.localeCompare(e.name));break;case"price":s.sort((e,r)=>e.price-r.price);break;case"price-desc":s.sort((e,r)=>r.price-e.price);break;case"rating":s.sort((e,r)=>r.rating-e.rating);break;case"featured":s.sort((e,r)=>(r.featured?1:0)-(e.featured?1:0));break}m.value=s},G=()=>{x.value="",b.value="",h.value=!1,w.value=!1,_.value=!1,v.value={min:0,max:1e3}},B=s=>{s>=1&&s<=u.value.totalPages&&k.setCurrentPage(s)};return K(()=>O.params.slug,()=>{D()}),W(()=>{D()}),X({title:c(()=>n.value?`${n.value.name} - Long Châu Online Pharmacy`:"Category - Long Châu"),meta:[{name:"description",content:c(()=>n.value?`${n.value.description} Shop ${n.value.name.toLowerCase()} products at Long Châu online pharmacy.`:"Browse products by category at Long Châu online pharmacy.")}]}),(s,e)=>{const r=ee;return a(),i("div",re,[t("div",ne,[l(P)?(a(),i("div",ae,e[10]||(e[10]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):l(n)?(a(),i("div",de,[t("div",ue,[t("nav",ce,[t("ol",me,[t("li",pe,[M(r,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:V(()=>e[14]||(e[14]=[U("Home")])),_:1,__:[14]})]),t("li",null,[t("div",ge,[e[16]||(e[16]=t("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),M(r,{to:"/products",class:"ml-1 text-gray-500 hover:text-gray-700 md:ml-2"},{default:V(()=>e[15]||(e[15]=[U("Products")])),_:1,__:[15]})])]),t("li",null,[t("div",ve,[e[17]||(e[17]=t("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),t("span",fe,p(l(n).name),1)])])])]),t("div",xe,[t("div",be,[l(n).image?(a(),i("div",ye,[t("img",{src:l(n).image,alt:l(n).name,class:"w-24 h-24 rounded-lg object-cover"},null,8,he)])):T("",!0),t("div",we,[t("h1",_e,p(l(n).name),1),t("p",ke,p(l(n).description),1),t("div",Ce,[t("span",null,p(l(z))+" "+p(l(z)===1?"product":"products")+" available",1),e[18]||(e[18]=t("span",{class:"mx-2"},"•",-1)),t("span",null,p(l(Z))+" in stock",1)])])])])]),t("div",Pe,[t("div",Le,[t("div",Be,[t("div",Se,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>y(x)?x.value=o:null),type:"text",placeholder:`Search in ${l(n).name}...`,class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:f},null,40,Me),[[N,l(x)]]),e[19]||(e[19]=t("svg",{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",null,[g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>y(b)?b.value=o:null),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[e[20]||(e[20]=t("option",{value:""},"All Brands",-1)),(a(!0),i(F,null,$(l(I),o=>(a(),i("option",{key:o,value:o},p(o),9,Ve))),128))],544),[[R,l(b)]])]),t("div",null,[g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>y(C)?C.value=o:null),onChange:Q,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[21]||(e[21]=[Y('<option value="name">Name A-Z</option><option value="name-desc">Name Z-A</option><option value="price">Price: Low to High</option><option value="price-desc">Price: High to Low</option><option value="rating">Highest Rated</option><option value="featured">Featured First</option>',6)]),544),[[R,l(C)]])])]),t("div",Ne,[t("div",Fe,[t("label",$e,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>y(h)?h.value=o:null),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:f},null,544),[[j,l(h)]]),e[22]||(e[22]=t("span",{class:"ml-2 text-sm text-gray-700"},"In Stock Only",-1))]),t("label",je,[g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>y(w)?w.value=o:null),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:f},null,544),[[j,l(w)]]),e[23]||(e[23]=t("span",{class:"ml-2 text-sm text-gray-700"},"Featured Products",-1))]),t("label",Ue,[g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>y(_)?_.value=o:null),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:f},null,544),[[j,l(_)]]),e[24]||(e[24]=t("span",{class:"ml-2 text-sm text-gray-700"},"On Sale",-1))]),t("div",Oe,[e[25]||(e[25]=t("span",{class:"text-sm text-gray-700"},"Price:",-1)),g(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l(v).min=o),type:"number",min:"0",placeholder:"Min",class:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:f},null,544),[[N,l(v).min,void 0,{number:!0}]]),e[26]||(e[26]=t("span",{class:"text-gray-500"},"-",-1)),g(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l(v).max=o),type:"number",min:"0",placeholder:"Max",class:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:f},null,544),[[N,l(v).max,void 0,{number:!0}]])]),t("button",{onClick:G,class:"text-sm text-blue-600 hover:text-blue-800 font-medium"}," Clear Filters ")])])]),l(L)?(a(),i("div",ze,e[27]||(e[27]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):l(A).length===0?(a(),i("div",Ae,e[28]||(e[28]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No products found",-1),t("p",{class:"mt-1 text-sm text-gray-500"}," Try adjusting your search criteria or filters ",-1)]))):(a(),i("div",De,[t("div",He,[(a(!0),i(F,null,$(l(A),o=>(a(),te(le,{key:o.id,product:o,"show-add-to-cart":!0},null,8,["product"]))),128))]),l(u).totalPages>1?(a(),i("div",Te,[t("nav",Re,[t("button",{onClick:e[8]||(e[8]=o=>B(l(u).currentPage-1)),disabled:!l(u).hasPrev,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,Ee),(a(!0),i(F,null,$(l(q),o=>(a(),i("button",{key:o,onClick:H=>B(o),class:se([{"bg-blue-50 border-blue-500 text-blue-600":o===l(u).currentPage,"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":o!==l(u).currentPage},"relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},p(o),11,Ie))),128)),t("button",{onClick:e[9]||(e[9]=o=>B(l(u).currentPage+1)),disabled:!l(u).hasNext,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," Next ",8,Ze)])])):T("",!0)]))])):(a(),i("div",ie,[e[12]||(e[12]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Category Not Found",-1)),e[13]||(e[13]=t("p",{class:"text-gray-600 mb-6"},"The category you're looking for doesn't exist.",-1)),M(r,{to:"/products",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:V(()=>e[11]||(e[11]=[U(" Browse All Products ")])),_:1,__:[11]})]))])])}}};export{Ke as default};
