import{B as V,i as Q,r as x,x as A,j as q,N as H,c as y,a,m as o,b as e,d as p,e as b,w,t as r,F as m,g,f,v as O,D as E,O as k,_ as W,H as U,o as l,h as C,n as B,p as G}from"./4Al0cLfe.js";import J from"./Drma5A4u.js";import{u as K}from"./FiuJam0s.js";import{_ as X}from"./DlAUqK2U.js";const Y={key:0,class:"flex justify-center items-center min-h-screen"},Z={key:1,class:"py-8 md:py-12"},ee={class:"container mx-auto px-4"},te={class:"flex mb-8","aria-label":"Breadcrumb"},se={class:"inline-flex items-center space-x-1 md:space-x-3"},oe={class:"inline-flex items-center"},le={class:"flex items-center"},ae={key:0},ie={class:"flex items-center"},ne={class:"flex items-center"},re={class:"ml-1 text-gray-500 md:ml-2"},de={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12"},ce={class:"space-y-4"},ue={class:"aspect-square bg-gray-100 rounded-lg overflow-hidden"},me=["src","alt"],ge={key:0,class:"flex space-x-2 overflow-x-auto"},ve=["onClick"],xe=["src","alt"],pe={class:"space-y-6"},_e={class:"text-3xl font-bold text-gray-900"},ye={key:0,class:"text-lg text-gray-600 mt-2"},fe={class:"flex items-center space-x-4"},he={class:"flex items-center"},be={class:"flex items-center"},we={class:"ml-2 text-sm text-gray-600"},ke={class:"space-y-2"},Ce={key:0,class:"flex items-baseline space-x-3"},Be={class:"text-3xl font-bold text-green-600"},Le={class:"text-xl text-gray-500 line-through"},$e={class:"px-3 py-1 bg-red-100 text-red-800 text-sm font-medium rounded-full"},ze={key:1,class:"text-3xl font-bold text-gray-900"},Ie={class:"flex items-center space-x-4"},Me={key:0,class:"flex items-center text-green-600"},De={key:1,class:"flex items-center text-red-600"},Ne={class:"space-y-2"},je={key:0,class:"flex items-center p-3 bg-red-50 border border-red-200 rounded-lg"},Fe={key:0,class:"space-y-4"},Re={class:"flex items-center space-x-4"},Se={class:"flex items-center border border-gray-300 rounded-lg"},Te=["disabled"],Pe=["max"],Ve=["disabled"],Qe={class:"mt-8"},Ae={class:"border-b border-gray-200"},qe={class:"-mb-px flex space-x-8"},He=["onClick"],Oe={class:"mt-6"},Ee={class:"prose max-w-none"},We={class:"text-gray-700 mb-4"},Ue={class:"prose max-w-none"},Ge={key:0},Je={key:0,class:"mb-4"},Ke={class:"list-disc pl-5"},Xe={key:1,class:"mb-4"},Ye={key:1,class:"text-gray-500"},Ze={class:"prose max-w-none"},et={key:0},tt={class:"mb-4"},st={key:0,class:"mb-4"},ot={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mt-4"},lt={class:"list-disc pl-5 text-yellow-700"},at={key:1,class:"text-gray-500"},it={class:"space-y-6"},nt={key:0,class:"space-y-4"},rt={class:"flex items-center justify-between mb-2"},dt={class:"flex items-center space-x-2"},ct={class:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-medium text-lg"},ut={class:"font-medium text-gray-800"},mt={class:"text-xs text-gray-500"},gt={class:"flex items-center"},vt={class:"text-gray-700"},xt={key:1,class:"text-center py-8"},pt={class:"mt-16"},_t={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},yt={key:2,class:"py-16 text-center"},ft={class:"max-w-md mx-auto"},ht={__name:"[slug]-final",setup(bt){const z=V();K();const I=Q(),L=x(!0),t=x(null),M=x([]),_=x(""),j=x(0),c=x(1),v=x(0),F=[{id:"description",name:"Description"},{id:"ingredients",name:"Ingredients"},{id:"directions",name:"Directions"},{id:"reviews",name:"Reviews"}],D=async()=>{var i;try{L.value=!0;const s=z.params.slug,{data:u}=await $fetch(`/api/products?slug=${s}`);if(u&&u.length>0&&(t.value=u[0],t.value.gallery&&t.value.gallery.length>0?_.value=t.value.gallery[0]:_.value=t.value.image,(i=t.value.category)!=null&&i.id)){const{data:$}=await $fetch(`/api/categories/${t.value.category.id}/products`);M.value=$.filter(n=>n.id!==t.value.id).slice(0,4)}}catch(s){console.error("Error loading product:",s),t.value=null}finally{L.value=!1}},R=()=>{c.value>1&&c.value--},S=()=>{var s;const i=((s=t.value)==null?void 0:s.maxQuantity)||10;c.value<i&&c.value++},N=()=>{var s;if(!t.value)return;const i={id:t.value.id,name:t.value.name,price:t.value.price,image:t.value.image,quantity:c.value,selectedVariant:((s=t.value.variants)==null?void 0:s[j.value])||null};I.addItem(i),alert(`${t.value.name} added to cart!`)},T=()=>{N(),U("/checkout")},P=i=>{const s={id:i.id,name:i.name,price:i.price,image:i.image,quantity:1};I.addItem(s),alert(`${i.name} added to cart!`)};return A(()=>{D()}),q(()=>z.params.slug,()=>{D()}),H({title:y(()=>{var i;return((i=t.value)==null?void 0:i.name)||"Product"}),description:y(()=>{var i;return((i=t.value)==null?void 0:i.description)||"Product details"}),ogTitle:y(()=>{var i;return((i=t.value)==null?void 0:i.name)||"Product"}),ogDescription:y(()=>{var i;return((i=t.value)==null?void 0:i.description)||"Product details"}),ogImage:y(()=>{var i;return((i=t.value)==null?void 0:i.image)||"/placeholder-product.jpg"})}),(i,s)=>{const u=W,$=J;return o(L)?(l(),a("div",Y,s[1]||(s[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):o(t)?(l(),a("div",Z,[e("div",ee,[e("nav",te,[e("ol",se,[e("li",oe,[b(u,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:w(()=>s[2]||(s[2]=[C("Home")])),_:1,__:[2]})]),e("li",null,[e("div",le,[s[4]||(s[4]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),b(u,{to:"/products",class:"ml-1 text-gray-500 hover:text-gray-700 md:ml-2"},{default:w(()=>s[3]||(s[3]=[C("Products")])),_:1,__:[3]})])]),o(t).category?(l(),a("li",ae,[e("div",ie,[s[5]||(s[5]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),b(u,{to:`/category/${o(t).category.slug}`,class:"ml-1 text-gray-500 hover:text-gray-700 md:ml-2"},{default:w(()=>[C(r(o(t).category.name),1)]),_:1},8,["to"])])])):p("",!0),e("li",null,[e("div",ne,[s[6]||(s[6]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),e("span",re,r(o(t).name),1)])])])]),e("div",de,[e("div",ce,[e("div",ue,[e("img",{src:o(_)||o(t).image||"/placeholder-product.jpg",alt:o(t).name,class:"w-full h-full object-cover"},null,8,me)]),o(t).gallery&&o(t).gallery.length>1?(l(),a("div",ge,[(l(!0),a(m,null,g(o(t).gallery,(n,d)=>(l(),a("button",{key:d,onClick:h=>_.value=n,class:B([{"ring-2 ring-blue-500":o(_)===n},"flex-shrink-0 w-20 h-20 bg-gray-100 rounded-lg overflow-hidden hover:ring-2 hover:ring-gray-300"])},[e("img",{src:n,alt:`${o(t).name} ${d+1}`,class:"w-full h-full object-cover"},null,8,xe)],10,ve))),128))])):p("",!0)]),e("div",pe,[e("div",null,[e("h1",_e,r(o(t).name),1),o(t).brand?(l(),a("p",ye,r(o(t).brand),1)):p("",!0)]),e("div",fe,[e("div",he,[e("div",be,[(l(),a(m,null,g(5,n=>e("svg",{key:n,class:B([n<=o(t).rating?"text-yellow-400":"text-gray-300","w-5 h-5"]),fill:"currentColor",viewBox:"0 0 20 20"},s[7]||(s[7]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))]),e("span",we,r(o(t).rating)+" ("+r(o(t).reviews)+" reviews)",1)])]),e("div",ke,[o(t).discount>0?(l(),a("div",Ce,[e("span",Be,"$"+r(o(t).price.toFixed(2)),1),e("span",Le,"$"+r((o(t).price*(1+o(t).discount/100)).toFixed(2)),1),e("span",$e,r(o(t).discount)+"% OFF ",1)])):(l(),a("div",ze," $"+r(o(t).price.toFixed(2)),1))]),e("div",Ie,[o(t).inStock?(l(),a("div",Me,s[8]||(s[8]=[e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),e("span",{class:"font-medium"},"In Stock",-1)]))):(l(),a("div",De,s[9]||(s[9]=[e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),e("span",{class:"font-medium"},"Out of stock",-1)])))]),e("div",Ne,[o(t).isRx?(l(),a("div",je,s[10]||(s[10]=[e("svg",{class:"w-5 h-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),e("span",{class:"text-red-800 text-sm font-medium"},"Prescription required for this medication",-1)]))):p("",!0)]),o(t).inStock?(l(),a("div",Fe,[e("div",Re,[s[11]||(s[11]=e("label",{class:"text-sm font-medium text-gray-700"},"Quantity:",-1)),e("div",Se,[e("button",{onClick:R,disabled:o(c)<=1,class:"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50"}," - ",8,Te),f(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>E(c)?c.value=n:null),type:"number",min:1,max:o(t).maxQuantity||10,class:"w-16 px-2 py-2 text-center border-0 focus:ring-0"},null,8,Pe),[[O,o(c),void 0,{number:!0}]]),e("button",{onClick:S,disabled:o(c)>=(o(t).maxQuantity||10),class:"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50"}," + ",8,Ve)])]),e("div",{class:"flex space-x-4"},[e("button",{onClick:N,class:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Add to Cart "),e("button",{onClick:T,class:"flex-1 bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"}," Buy Now ")])])):p("",!0),e("div",Qe,[e("div",Ae,[e("nav",qe,[(l(),a(m,null,g(F,(n,d)=>e("button",{key:n.id,onClick:h=>v.value=d,class:B([{"border-blue-500 text-blue-600":o(v)===d,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":o(v)!==d},"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},r(n.name),11,He)),64))])]),e("div",Oe,[f(e("div",Ee,[e("p",We,r(o(t).description),1)],512),[[k,o(v)===0]]),f(e("div",Ue,[o(t).ingredients?(l(),a("div",Ge,[Array.isArray(o(t).ingredients)?(l(),a("div",Je,[s[12]||(s[12]=e("h4",{class:"font-semibold text-lg mb-2"},"Active Ingredients:",-1)),e("ul",Ke,[(l(!0),a(m,null,g(o(t).ingredients,(n,d)=>(l(),a("li",{key:d,class:"mb-1"},r(n),1))),128))])])):(l(),a("div",Xe,[e("p",null,r(o(t).ingredients),1)]))])):(l(),a("div",Ye,"Information about the ingredients is currently not available for this product."))],512),[[k,o(v)===1]]),f(e("div",Ze,[o(t).directions?(l(),a("div",et,[e("p",tt,r(o(t).directions),1),o(t).dosage?(l(),a("div",st,[s[13]||(s[13]=e("h4",{class:"font-semibold text-lg mb-2"},"Recommended Dosage:",-1)),e("p",null,r(o(t).dosage),1)])):p("",!0),o(t).warnings&&o(t).warnings.length>0?(l(),a("div",ot,[s[14]||(s[14]=e("h4",{class:"font-semibold text-yellow-700 mb-2"},"Important Warnings:",-1)),e("ul",lt,[(l(!0),a(m,null,g(o(t).warnings,(n,d)=>(l(),a("li",{key:d,class:"mb-1"},r(n),1))),128))])])):p("",!0)])):(l(),a("div",at,"Detailed usage directions are currently not available for this product."))],512),[[k,o(v)===2]]),f(e("div",null,[e("div",it,[s[17]||(s[17]=e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-medium"},"Customer Reviews"),e("button",{class:"text-blue-600 hover:text-blue-700 text-sm font-medium"},"Write a Review")],-1)),o(t).reviewList&&o(t).reviewList.length>0?(l(),a("div",nt,[(l(!0),a(m,null,g(o(t).reviewList,(n,d)=>(l(),a("div",{key:d,class:"border-b border-gray-200 pb-4"},[e("div",rt,[e("div",dt,[e("div",ct,r(n.name.charAt(0)),1),e("div",null,[e("p",ut,r(n.name),1),e("p",mt,r(n.date),1)])]),e("div",gt,[(l(),a(m,null,g(5,h=>e("svg",{key:h,class:B([h<=n.rating?"text-yellow-400":"text-gray-300","w-4 h-4"]),fill:"currentColor",viewBox:"0 0 20 20"},s[15]||(s[15]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))])]),e("p",vt,r(n.comment),1)]))),128))])):(l(),a("div",xt,s[16]||(s[16]=[e("p",{class:"text-gray-500 mb-3"},"No reviews yet",-1),e("button",{class:"text-blue-600 hover:text-blue-700 text-sm font-medium"},"Be the first to write a review",-1)])))])],512),[[k,o(v)===3]])])])])]),e("div",pt,[s[18]||(s[18]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-8"},"Related Products",-1)),e("div",_t,[(l(!0),a(m,null,g(o(M),n=>(l(),G($,{key:n.id,product:n,onAddToCart:P},null,8,["product"]))),128))])])])])):(l(),a("div",yt,[e("div",ft,[s[20]||(s[20]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Product Not Found",-1)),s[21]||(s[21]=e("p",{class:"text-gray-600 mb-8"},"The product you're looking for doesn't exist or has been removed.",-1)),b(u,{to:"/products",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700"},{default:w(()=>s[19]||(s[19]=[C(" Browse Products ")])),_:1,__:[19]})])]))}}},Lt=X(ht,[["__scopeId","data-v-794776d5"]]);export{Lt as default};
