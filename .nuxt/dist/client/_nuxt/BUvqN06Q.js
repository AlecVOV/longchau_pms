import{r as p,c as _,j as A,x as E,a as c,b as t,d as L,F as k,g as C,m as i,y as N,t as n,f as x,v as f,o as u,e as S,w as j,h as M,_ as U}from"./4Al0cLfe.js";import{u as B}from"./FiuJam0s.js";const F={class:"py-8"},z={class:"container mx-auto px-4"},D={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8"},T={class:"mt-4 sm:mt-0 space-x-4"},H={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},I={class:"aspect-video bg-gray-100 rounded-t-lg overflow-hidden"},O=["src","alt"],q={class:"p-6"},R={class:"flex items-start justify-between mb-3"},G={class:"text-lg font-semibold text-gray-900 mb-1"},J={class:"text-sm text-gray-600"},K={class:"flex space-x-2"},Q=["onClick"],W=["onClick"],X={class:"flex items-center justify-between text-sm text-gray-500"},Y={class:"bg-white rounded-lg shadow-sm border p-6"},Z={class:"overflow-x-auto"},tt={class:"min-w-full divide-y divide-gray-200"},et={class:"bg-white divide-y divide-gray-200"},st={class:"px-6 py-4 whitespace-nowrap"},ot={class:"flex items-center"},lt={class:"flex-shrink-0 h-10 w-10"},it=["src","alt"],rt={class:"ml-4"},nt={class:"text-sm font-medium text-gray-900"},at={class:"text-sm text-gray-500"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ut={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},gt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},xt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},ft={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},yt={class:"flex space-x-2"},bt=["onClick"],ht={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},vt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},wt={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},_t={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},kt={class:"sm:flex sm:items-start"},Ct={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},St={class:"text-lg leading-6 font-medium text-gray-900 mb-4"},jt={class:"space-y-4"},Mt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Pt={type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"},Et={__name:"categories",setup(Vt){const a=B(),y=p(!1),d=p(!1),g=p(null),l=p({name:"",slug:"",description:"",image:""}),h=_(()=>a.categories),P=_(()=>a.products),m=o=>{const e=P.value.filter(r=>r.categoryId===o);return{totalProducts:e.length,inStock:e.filter(r=>r.stock>10).length,lowStock:e.filter(r=>r.stock>0&&r.stock<=10).length,outOfStock:e.filter(r=>r.stock===0).length}},v=o=>{g.value=o,l.value={name:o.name,slug:o.slug,description:o.description||"",image:o.image||""},d.value=!0},b=()=>{y.value=!1,d.value=!1,g.value=null,l.value={name:"",slug:"",description:"",image:""}},V=async()=>{try{d.value&&g.value?await a.updateCategory(g.value.id,l.value):await a.addCategory(l.value),b()}catch(o){console.error("Failed to save category:",o)}},$=async o=>{const e=m(o.id);if(e.totalProducts>0){if(!confirm(`This category contains ${e.totalProducts} products. Are you sure you want to delete it? The products will need to be reassigned to other categories.`))return}else if(!confirm(`Are you sure you want to delete the category "${o.name}"?`))return;try{await a.deleteCategory(o.id)}catch(r){console.error("Failed to delete category:",r)}};return A(()=>l.value.name,o=>{o&&!d.value&&(l.value.slug=o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))}),E(async()=>{await Promise.all([a.fetchCategories(),a.fetchProducts()])}),(o,e)=>{const r=U;return u(),c("div",F,[t("div",z,[t("div",D,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Category Management"),t("p",{class:"text-gray-600 mt-2"},"Manage product categories and organization")],-1)),t("div",T,[t("button",{onClick:e[0]||(e[0]=s=>y.value=!0),class:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Add New Category ")])]),t("div",H,[(u(!0),c(k,null,C(i(h),s=>(u(),c("div",{key:s.id,class:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow"},[t("div",I,[t("img",{src:s.image||"/placeholder-category.jpg",alt:s.name,class:"w-full h-full object-cover"},null,8,O)]),t("div",q,[t("div",R,[t("div",null,[t("h3",G,n(s.name),1),t("p",J,n(s.description),1)]),t("div",K,[t("button",{onClick:w=>v(s),class:"text-blue-600 hover:text-blue-800 p-1",title:"Edit Category"},e[6]||(e[6]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Q),t("button",{onClick:w=>$(s),class:"text-red-600 hover:text-red-800 p-1",title:"Delete Category"},e[7]||(e[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,W)])]),t("div",X,[t("span",null,n(s.productCount||0)+" products",1),S(r,{to:`/category/${s.slug}`,class:"text-blue-600 hover:text-blue-800 font-medium"},{default:j(()=>e[8]||(e[8]=[M(" View Products â†’ ")])),_:2,__:[8]},1032,["to"])])])]))),128))]),t("div",Y,[e[11]||(e[11]=t("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Category Statistics",-1)),t("div",Z,[t("table",tt,[e[10]||(e[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Category "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Products "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," In Stock "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Low Stock "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Out of Stock "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",et,[(u(!0),c(k,null,C(i(h),s=>(u(),c("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",st,[t("div",ot,[t("div",lt,[t("img",{src:s.image||"/placeholder-category.jpg",alt:s.name,class:"h-10 w-10 rounded-lg object-cover"},null,8,it)]),t("div",rt,[t("div",nt,n(s.name),1),t("div",at,n(s.slug),1)])])]),t("td",dt,n(m(s.id).totalProducts),1),t("td",ct,[t("span",ut,n(m(s.id).inStock),1)]),t("td",mt,[t("span",gt,n(m(s.id).lowStock),1)]),t("td",pt,[t("span",xt,n(m(s.id).outOfStock),1)]),t("td",ft,[t("div",yt,[S(r,{to:`/admin/products?category=${s.id}`,class:"text-blue-600 hover:text-blue-900"},{default:j(()=>e[9]||(e[9]=[M(" Manage Products ")])),_:2,__:[9]},1032,["to"]),t("button",{onClick:w=>v(s),class:"text-indigo-600 hover:text-indigo-900"}," Edit ",8,bt)])])]))),128))])])])])]),i(y)||i(d)?(u(),c("div",ht,[t("div",vt,[t("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75",onClick:b})]),t("div",wt,[t("form",{onSubmit:N(V,["prevent"])},[t("div",_t,[t("div",kt,[t("div",Ct,[t("h3",St,n(i(d)?"Edit Category":"Add New Category"),1),t("div",jt,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category Name",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>i(l).name=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter category name"},null,512),[[f,i(l).name]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Slug",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>i(l).slug=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"category-slug"},null,512),[[f,i(l).slug]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),x(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>i(l).description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter category description"},null,512),[[f,i(l).description]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image URL",-1)),x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>i(l).image=s),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/image.jpg"},null,512),[[f,i(l).image]])])])])])]),t("div",Mt,[t("button",Pt,n(i(d)?"Update Category":"Add Category"),1),t("button",{type:"button",onClick:b,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):L("",!0)])}}};export{Et as default};
