import{q as S,r as a,x as L,a as o,b as t,k as P,m as d,h as r,t as l,F as _,g as k,e as C,w as D,_ as T,H as B,o as i}from"./4Al0cLfe.js";const F={class:"min-h-screen bg-gray-50 py-8"},I={class:"max-w-4xl mx-auto px-4"},N={class:"bg-white rounded-lg shadow p-6 mb-6"},M={key:0,class:"text-center py-4"},V={key:1,class:"bg-red-50 border border-red-200 rounded p-4 text-red-700"},W={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},$={class:"font-semibold"},E={class:"text-sm text-gray-600 mb-2"},J={class:"flex justify-between items-center"},O={class:"text-lg font-bold text-green-600"},Q={class:"text-sm text-gray-500"},R={class:"mt-2"},U={class:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded"},j={class:"bg-white rounded-lg shadow p-6 mb-6"},q={key:0,class:"text-center py-4"},G={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},H={class:"font-semibold text-sm"},Y={class:"text-xs text-gray-500 mt-1"},z={class:"bg-white rounded-lg shadow p-6"},K={key:0,class:"space-y-4"},X={key:1,class:"space-y-4"},Z={class:"bg-green-50 border border-green-200 rounded p-4"},tt={class:"text-green-800"},st={class:"text-green-700"},et={class:"bg-blue-50 border border-blue-200 rounded-lg p-6 mt-6"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm"},lt={class:"space-y-1 text-blue-700"},nt={__name:"api-test",setup(it){const u=S(),c=a([]),g=a([]),m=a(!0),x=a(!0),b=a(null);L(async()=>{try{const{data:e}=await $fetch("/api/products");c.value=(e==null?void 0:e.products)||e||[]}catch(e){b.value=e.message||"Failed to fetch products"}finally{m.value=!1}try{const{data:e}=await $fetch("/api/categories");g.value=(e==null?void 0:e.categories)||e||[]}catch(e){console.error("Failed to fetch categories:",e)}finally{x.value=!1}});const w=async()=>{try{await u.logout(),await B("/")}catch(e){console.error("Logout error:",e)}};return(e,s)=>{var v,p,y,h;const A=T;return i(),o("div",F,[t("div",I,[s[18]||(s[18]=P('<h1 class="text-3xl font-bold text-gray-900 mb-8">ğŸ§ª Backend API Testing</h1><div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-xl font-semibold mb-4">ğŸ”„ API Status</h2><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="text-center"><div class="text-2xl mb-2">ğŸ—„ï¸</div><div class="text-sm text-gray-600">Database</div><div class="font-semibold text-green-600">Connected</div></div><div class="text-center"><div class="text-2xl mb-2">ğŸ”</div><div class="text-sm text-gray-600">Authentication</div><div class="font-semibold text-green-600">Active</div></div><div class="text-center"><div class="text-2xl mb-2">ğŸ›’</div><div class="text-sm text-gray-600">Products API</div><div class="font-semibold text-green-600">Working</div></div></div></div>',2)),t("div",N,[s[2]||(s[2]=t("h2",{class:"text-xl font-semibold mb-4"},"ğŸ¥ Products from Database",-1)),d(m)?(i(),o("div",M,s[0]||(s[0]=[t("div",{class:"animate-spin inline-block w-6 h-6 border-4 border-blue-600 border-t-transparent rounded-full"},null,-1),t("p",{class:"mt-2"},"Loading products...",-1)]))):d(b)?(i(),o("div",V,[s[1]||(s[1]=t("strong",null,"Error:",-1)),r(" "+l(d(b)),1)])):(i(),o("div",W,[(i(!0),o(_,null,k(d(c),n=>{var f;return i(),o("div",{key:n.id,class:"border rounded-lg p-4"},[t("h3",$,l(n.name),1),t("p",E,l(n.shortDescription),1),t("div",J,[t("span",O,"$"+l(n.price),1),t("span",Q,"Stock: "+l(n.stock),1)]),t("div",R,[t("span",U,l((f=n.category)==null?void 0:f.name),1)])])}),128))]))]),t("div",j,[s[5]||(s[5]=t("h2",{class:"text-xl font-semibold mb-4"},"ğŸ“¦ Categories from Database",-1)),d(x)?(i(),o("div",q,s[3]||(s[3]=[t("div",{class:"animate-spin inline-block w-6 h-6 border-4 border-blue-600 border-t-transparent rounded-full"},null,-1),t("p",{class:"mt-2"},"Loading categories...",-1)]))):(i(),o("div",G,[(i(!0),o(_,null,k(d(g),n=>(i(),o("div",{key:n.id,class:"text-center p-4 border rounded-lg"},[s[4]||(s[4]=t("div",{class:"text-2xl mb-2"},"ğŸ·ï¸",-1)),t("h3",H,l(n.name),1),t("p",Y,l(n.slug),1)]))),128))]))]),t("div",z,[s[11]||(s[11]=t("h2",{class:"text-xl font-semibold mb-4"},"ğŸ” Authentication Test",-1)),d(u).isLoggedIn?(i(),o("div",X,[t("div",Z,[t("p",tt,[s[9]||(s[9]=r("âœ… You are logged in as: ")),t("strong",null,l((v=d(u).user)==null?void 0:v.email),1)]),t("p",st,[s[10]||(s[10]=r("Role: ")),t("strong",null,l((p=d(u).user)==null?void 0:p.role),1)])]),t("button",{onClick:w,class:"bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700"}," Logout ")])):(i(),o("div",K,[s[7]||(s[7]=t("p",{class:"text-gray-600"},"Test login with sample credentials:",-1)),s[8]||(s[8]=t("div",{class:"bg-gray-50 p-4 rounded"},[t("p",null,[t("strong",null,"Customer:"),r(" customer@example.com / customer123")]),t("p",null,[t("strong",null,"Admin:"),r(" admin@pharmacy.com / admin123")])],-1)),C(A,{to:"/login",class:"inline-block bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700"},{default:D(()=>s[6]||(s[6]=[r(" Go to Login Page ")])),_:1,__:[6]})]))]),t("div",et,[s[17]||(s[17]=t("h2",{class:"text-xl font-semibold mb-4 text-blue-900"},"ğŸ“Š Phase 1 Backend Summary",-1)),t("div",ot,[s[16]||(s[16]=t("div",null,[t("h3",{class:"font-semibold text-blue-800 mb-2"},"âœ… Completed Features:"),t("ul",{class:"space-y-1 text-blue-700"},[t("li",null,"â€¢ SQLite Database with Prisma ORM"),t("li",null,"â€¢ JWT Authentication System"),t("li",null,"â€¢ Products & Categories API"),t("li",null,"â€¢ User Management (Admin/Customer)"),t("li",null,"â€¢ Cart & Order Models"),t("li",null,"â€¢ Database Seeding")])],-1)),t("div",null,[s[15]||(s[15]=t("h3",{class:"font-semibold text-blue-800 mb-2"},"ğŸ“Š Database Stats:",-1)),t("ul",lt,[t("li",null,"â€¢ Products: "+l(((y=d(c))==null?void 0:y.length)||0),1),t("li",null,"â€¢ Categories: "+l(((h=d(g))==null?void 0:h.length)||0),1),s[12]||(s[12]=t("li",null,"â€¢ Users: 2 (1 admin, 1 customer)",-1)),s[13]||(s[13]=t("li",null,"â€¢ Authentication: JWT-based",-1)),s[14]||(s[14]=t("li",null,"â€¢ Database: SQLite (dev.db)",-1))])])])])])])}}};export{nt as default};
