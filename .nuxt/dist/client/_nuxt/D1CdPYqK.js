import{r as m,c as g,x as Y,a as y,b as e,d as Z,t as r,m as l,k as ee,f as x,v as N,D as p,E as P,F,g as I,A as R,o as k,n as te}from"./4Al0cLfe.js";import{u as se}from"./FiuJam0s.js";const oe={class:"py-8"},le={class:"container mx-auto px-4"},re={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8"},ne={class:"mt-4 sm:mt-0 flex space-x-4"},ie={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},de={class:"bg-white p-6 rounded-lg shadow-sm border"},ae={class:"flex items-center"},ue={class:"ml-4"},ce={class:"text-2xl font-bold text-gray-900"},me={class:"bg-white p-6 rounded-lg shadow-sm border"},ge={class:"flex items-center"},xe={class:"ml-4"},pe={class:"text-2xl font-bold text-gray-900"},ve={class:"bg-white p-6 rounded-lg shadow-sm border"},be={class:"flex items-center"},fe={class:"ml-4"},ye={class:"text-2xl font-bold text-gray-900"},ke={class:"bg-white p-6 rounded-lg shadow-sm border"},we={class:"flex items-center"},he={class:"ml-4"},_e={class:"text-2xl font-bold text-gray-900"},Se={class:"bg-white rounded-lg shadow-sm border p-6 mb-8"},Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Pe={class:"text-left"},Le={class:"text-sm text-gray-500"},Ue={class:"text-left"},je={class:"text-sm text-gray-500"},Me={class:"bg-white rounded-lg shadow-sm border overflow-hidden"},Ve={class:"p-6 border-b border-gray-200"},Be={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ne=["value"],Fe={value:"well-stocked"},Ie={value:"low-stock"},Re={class:"overflow-x-auto"},Oe={class:"min-w-full divide-y divide-gray-200"},$e={class:"bg-gray-50"},Ae={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ze={class:"bg-white divide-y divide-gray-200"},De={class:"px-6 py-4 whitespace-nowrap"},Ee=["value"],Qe={class:"px-6 py-4 whitespace-nowrap"},Te={class:"flex items-center"},qe={class:"flex-shrink-0 h-10 w-10"},He=["src","alt"],Ke={class:"ml-4"},We={class:"text-sm font-medium text-gray-900"},Ge={class:"text-sm text-gray-500"},Je={class:"px-6 py-4 whitespace-nowrap"},Xe={class:"flex items-center space-x-2"},Ye=["value","onChange"],Ze={class:"px-6 py-4 whitespace-nowrap"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},lt={class:"flex space-x-2"},rt=["onClick"],nt=["onClick"],it={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},dt={class:"flex-1 flex justify-between sm:hidden"},at=["disabled"],ut=["disabled"],ct={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},mt={class:"text-sm text-gray-700"},gt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},xt=["disabled"],pt=["disabled"],vt={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},bt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ft={class:"fixed inset-0 transition-opacity","aria-hidden":"true"},yt={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},kt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},wt={class:"space-y-4"},ht={class:"block text-sm font-medium text-gray-700 mb-2"},_t={class:"block text-sm font-medium text-gray-700 mb-2"},St={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ct=["disabled"],jt={__name:"inventory",setup(Pt){const d=se(),v=m(""),b=m(""),c=m(""),a=m([]),w=m(!1),h=m(!1),_=m("set"),C=m(0),u={well:20,low:10},f=g(()=>d.products),O=g(()=>d.categories),n=g(()=>d.pagination),S=g(()=>{let o=[...f.value];if(v.value){const t=v.value.toLowerCase();o=o.filter(s=>s.name.toLowerCase().includes(t)||s.sku.toLowerCase().includes(t))}if(b.value&&(o=o.filter(t=>t.categoryId===parseInt(b.value))),c.value)switch(c.value){case"well-stocked":o=o.filter(t=>t.stock>u.well);break;case"low-stock":o=o.filter(t=>t.stock>0&&t.stock<=u.low);break;case"out-of-stock":o=o.filter(t=>t.stock===0);break}return o}),$=g(()=>f.value.reduce((o,t)=>o+t.stock*t.price,0)),A=g(()=>f.value.filter(o=>o.stock>u.well).length),L=g(()=>f.value.filter(o=>o.stock>0&&o.stock<=u.low).length),U=g(()=>f.value.filter(o=>o.stock===0).length),j=o=>o===0?"Out of Stock":o<=u.low?"Low Stock":"In Stock",z=o=>o===0?"bg-red-100 text-red-800":o<=u.low?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",D=o=>new Date().toLocaleDateString(),M=async(o,t)=>{try{await d.setStock(o.id,parseInt(t))}catch(s){console.error("Failed to update stock:",s)}},E=()=>{w.value?a.value=S.value.map(o=>o.id):a.value=[]},Q=async()=>{if(a.value.length!==0)try{const o=a.value.map(t=>({productId:t,stock:C.value,operation:_.value}));await d.bulkUpdateStock(o),h.value=!1,a.value=[],w.value=!1}catch(o){console.error("Failed to bulk update stock:",o)}},T=()=>{v.value="",b.value="",c.value=""},q=()=>{c.value="low-stock"},H=()=>{c.value="out-of-stock"},K=()=>{const o=W(),t=new Blob([o],{type:"text/csv"}),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=`inventory-${new Date().toISOString().split("T")[0]}.csv`,i.click(),window.URL.revokeObjectURL(s)},W=()=>{const o=["Product Name","SKU","Category","Current Stock","Unit Price","Stock Value","Status"],t=S.value.map(s=>{var i;return[s.name,s.sku,((i=s.category)==null?void 0:i.name)||"N/A",s.stock,s.price.toFixed(2),(s.stock*s.price).toFixed(2),j(s.stock)]});return[o,...t].map(s=>s.join(",")).join(`
`)},G=()=>{const o=f.value.filter(t=>t.stock<=u.low);console.log("Reorder list generated:",o)},J=o=>{console.log("Show stock history for:",o.name)},X=o=>{const t=prompt(`Enter quantity to add to ${o.name} (current: ${o.stock}):`);t&&!isNaN(t)&&M(o,o.stock+parseInt(t))},V=()=>{n.value.hasPrev&&(d.setCurrentPage(n.value.currentPage-1),d.fetchProducts())},B=()=>{n.value.hasNext&&(d.setCurrentPage(n.value.currentPage+1),d.fetchProducts())};return Y(async()=>{await Promise.all([d.fetchProducts(),d.fetchCategories()])}),(o,t)=>(k(),y("div",oe,[e("div",le,[e("div",re,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Inventory Management"),e("p",{class:"text-gray-600 mt-2"},"Monitor and manage product stock levels")],-1)),e("div",ne,[e("button",{onClick:t[0]||(t[0]=s=>h.value=!0),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium"}," Bulk Update "),e("button",{onClick:K,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Export CSV ")])]),e("div",ie,[e("div",de,[e("div",ae,[t[12]||(t[12]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),e("div",ue,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Value",-1)),e("p",ce,"$"+r(l($).toFixed(2)),1)])])]),e("div",me,[e("div",ge,[t[14]||(t[14]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",xe,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Well Stocked",-1)),e("p",pe,r(l(A)),1)])])]),e("div",ve,[e("div",be,[t[16]||(t[16]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",fe,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Low Stock Alerts",-1)),e("p",ye,r(l(L)),1)])])]),e("div",ke,[e("div",we,[t[18]||(t[18]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e("div",he,[t[17]||(t[17]=e("p",{class:"text-sm font-medium text-gray-600"},"Out of Stock",-1)),e("p",_e,r(l(U)),1)])])])]),e("div",Se,[t[24]||(t[24]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",Ce,[e("button",{onClick:q,class:"flex items-center p-4 border border-yellow-300 rounded-lg hover:bg-yellow-50 transition-colors"},[t[20]||(t[20]=e("div",{class:"p-2 bg-yellow-100 rounded-lg mr-3"},[e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Pe,[t[19]||(t[19]=e("div",{class:"font-medium text-gray-900"},"Review Low Stock",-1)),e("div",Le,r(l(L))+" items need attention",1)])]),e("button",{onClick:H,class:"flex items-center p-4 border border-red-300 rounded-lg hover:bg-red-50 transition-colors"},[t[22]||(t[22]=e("div",{class:"p-2 bg-red-100 rounded-lg mr-3"},[e("svg",{class:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e("div",Ue,[t[21]||(t[21]=e("div",{class:"font-medium text-gray-900"},"Restock Items",-1)),e("div",je,r(l(U))+" items out of stock",1)])]),e("button",{onClick:G,class:"flex items-center p-4 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors"},t[23]||(t[23]=[ee('<div class="p-2 bg-blue-100 rounded-lg mr-3"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><div class="text-left"><div class="font-medium text-gray-900">Generate Reorder List</div><div class="text-sm text-gray-500">Create purchase orders</div></div>',2)]))])]),e("div",Me,[e("div",Ve,[e("div",Be,[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Products",-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>p(v)?v.value=s:null),type:"text",placeholder:"Search by name or SKU",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[N,l(v)]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category",-1)),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>p(b)?b.value=s:null),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[26]||(t[26]=e("option",{value:""},"All Categories",-1)),(k(!0),y(F,null,I(l(O),s=>(k(),y("option",{key:s.id,value:s.id},r(s.name),9,Ne))),128))],512),[[P,l(b)]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Stock Status",-1)),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>p(c)?c.value=s:null),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[28]||(t[28]=e("option",{value:""},"All Products",-1)),e("option",Fe,"Well Stocked (>"+r(u.well)+")",1),e("option",Ie,"Low Stock (1-"+r(u.low)+")",1),t[29]||(t[29]=e("option",{value:"out-of-stock"},"Out of Stock (0)",-1))],512),[[P,l(c)]])]),e("div",{class:"flex items-end"},[e("button",{onClick:T,class:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"}," Clear Filters ")])])]),e("div",Re,[e("table",Oe,[e("thead",$e,[e("tr",null,[e("th",Ae,[x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>p(w)?w.value=s:null),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:E},null,544),[[R,l(w)]])]),t[31]||(t[31]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product ",-1)),t[32]||(t[32]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Current Stock ",-1)),t[33]||(t[33]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[34]||(t[34]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unit Price ",-1)),t[35]||(t[35]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock Value ",-1)),t[36]||(t[36]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Updated ",-1)),t[37]||(t[37]=e("th",{class:"relative px-6 py-3"},"Actions",-1))])]),e("tbody",ze,[(k(!0),y(F,null,I(l(S),s=>(k(),y("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",De,[x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>p(a)?a.value=i:null),value:s.id,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,Ee),[[R,l(a)]])]),e("td",Qe,[e("div",Te,[e("div",qe,[e("img",{src:s.image||"/placeholder-product.jpg",alt:s.name,class:"h-10 w-10 rounded-lg object-cover"},null,8,He)]),e("div",Ke,[e("div",We,r(s.name),1),e("div",Ge,"SKU: "+r(s.sku),1)])])]),e("td",Je,[e("div",Xe,[e("input",{value:s.stock,type:"number",min:"0",class:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:i=>M(s,i.target.value)},null,40,Ye),t[38]||(t[38]=e("span",{class:"text-sm text-gray-500"},"units",-1))])]),e("td",Ze,[e("span",{class:te([z(s.stock),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},r(j(s.stock)),3)]),e("td",et," $"+r(s.price.toFixed(2)),1),e("td",tt," $"+r((s.stock*s.price).toFixed(2)),1),e("td",st,r(D(s.lastUpdated)),1),e("td",ot,[e("div",lt,[e("button",{onClick:i=>J(s),class:"text-blue-600 hover:text-blue-900",title:"View History"},t[39]||(t[39]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,rt),e("button",{onClick:i=>X(s),class:"text-green-600 hover:text-green-900",title:"Quick Restock"},t[40]||(t[40]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,nt)])])]))),128))])])]),e("div",it,[e("div",dt,[e("button",{onClick:V,disabled:!l(n).hasPrev,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,at),e("button",{onClick:B,disabled:!l(n).hasNext,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Next ",8,ut)]),e("div",ct,[e("div",null,[e("p",mt," Showing "+r((l(n).currentPage-1)*l(n).itemsPerPage+1)+" to "+r(Math.min(l(n).currentPage*l(n).itemsPerPage,l(S).length))+" of "+r(l(S).length)+" results ",1)]),e("div",null,[e("nav",gt,[e("button",{onClick:V,disabled:!l(n).hasPrev,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,xt),e("button",{onClick:B,disabled:!l(n).hasNext,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"}," Next ",8,pt)])])])])])]),l(h)?(k(),y("div",vt,[e("div",bt,[e("div",ft,[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75",onClick:t[6]||(t[6]=s=>h.value=!1)})]),e("div",yt,[e("div",kt,[t[44]||(t[44]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Bulk Stock Update ",-1)),e("div",wt,[e("div",null,[e("label",ht," Selected Products: "+r(l(a).length),1),t[41]||(t[41]=e("p",{class:"text-sm text-gray-500"}," Update stock levels for all selected products ",-1))]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Operation",-1)),x(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>p(_)?_.value=s:null),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[42]||(t[42]=[e("option",{value:"set"},"Set Stock Level",-1),e("option",{value:"add"},"Add to Current Stock",-1),e("option",{value:"subtract"},"Subtract from Current Stock",-1)]),512),[[P,l(_)]])]),e("div",null,[e("label",_t,r(l(_)==="set"?"New Stock Level":"Quantity"),1),x(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>p(C)?C.value=s:null),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[N,l(C),void 0,{number:!0}]])])])]),e("div",St,[e("button",{onClick:Q,disabled:l(a).length===0,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"}," Update "+r(l(a).length)+" Products ",9,Ct),e("button",{onClick:t[9]||(t[9]=s=>h.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):Z("",!0)]))}};export{jt as default};
