import{B as V,s as R,i as T,r as m,c as j,x as I,u as S,a as r,m as o,b as e,d as c,e as v,w as x,t as n,F as h,g as b,f as q,v as D,D as H,_ as O,o as l,h as p,n as P,p as Q}from"./4Al0cLfe.js";import A from"./Drma5A4u.js";import{u as E}from"./FiuJam0s.js";import{_ as U}from"./DlAUqK2U.js";const G={key:0,class:"flex justify-center items-center min-h-screen"},J={key:1,class:"py-8 md:py-12"},K={class:"container mx-auto px-4"},W={class:"flex mb-8","aria-label":"Breadcrumb"},X={class:"inline-flex items-center space-x-1 md:space-x-3"},Y={class:"inline-flex items-center"},Z={class:"flex items-center"},ee={key:0},te={class:"flex items-center"},se={class:"flex items-center"},oe={class:"ml-1 text-gray-500 md:ml-2"},le={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12"},re={class:"space-y-4"},ae={class:"aspect-square bg-gray-100 rounded-lg overflow-hidden"},ne=["src","alt"],de={key:0,class:"flex space-x-2 overflow-x-auto"},ie=["onClick"],ce=["src","alt"],ue={class:"space-y-6"},ge={class:"text-3xl font-bold text-gray-900"},me={key:0,class:"text-lg text-gray-600 mt-2"},ve={class:"flex items-center space-x-4"},xe={class:"flex items-center"},pe={class:"flex items-center"},fe={class:"ml-2 text-sm text-gray-600"},_e={class:"space-y-2"},ye={key:0,class:"flex items-baseline space-x-3"},he={class:"text-3xl font-bold text-green-600"},be={class:"text-xl text-gray-500 line-through"},we={class:"px-3 py-1 bg-red-100 text-red-800 text-sm font-medium rounded-full"},ke={key:1,class:"text-3xl font-bold text-gray-900"},Ce={class:"flex items-center space-x-4"},Be={key:0,class:"flex items-center text-green-600"},Pe={class:"font-medium"},ze={key:1,class:"flex items-center text-red-600"},Le={class:"space-y-2"},Me={key:0,class:"flex items-center p-3 bg-red-50 border border-red-200 rounded-lg"},Ne={key:1,class:"flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},Fe={class:"text-yellow-800 text-sm font-medium"},$e={key:0,class:"space-y-4"},Ve={class:"flex items-center space-x-4"},Re={class:"flex items-center border border-gray-300 rounded-lg"},Te=["disabled"],je=["max"],Ie=["disabled"],Se={class:"mt-8 space-y-6"},qe={class:"text-gray-700"},De={key:0,class:"mt-16"},He={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},Oe={key:2,class:"py-16 text-center"},Qe={class:"max-w-md mx-auto"},Ae={__name:"[slug]-new",setup(Ee){const z=V(),L=R(),f=E(),w=T(),k=m(!0),t=m(null),g=m(""),d=m(1),_=m([]),M=j(()=>{var a,s;return((a=t.value)==null?void 0:a.discount)>0?t.value.price*(1-t.value.discount/100):((s=t.value)==null?void 0:s.price)||0}),N=()=>{d.value<t.value.stock&&d.value++},F=()=>{d.value>1&&d.value--},C=()=>{w.addItem(t.value,d.value)},$=()=>{w.addItem(t.value,d.value),L.push("/checkout")};return I(async()=>{try{const a=z.params.slug,s=await f.fetchProductById(a);if(t.value=s,t.value.images&&t.value.images.length>0?g.value=t.value.images[0]:g.value=t.value.image,f.addToRecentlyViewed(t.value),t.value.category){const u=await f.getProductsByCategory(t.value.category.id);_.value=u.filter(y=>y.id!==t.value.id).slice(0,4)}}catch(a){console.error("Error fetching product:",a)}finally{k.value=!1}}),S({title:()=>t.value?`${t.value.name} - Long Châu`:"Product Not Found - Long Châu",meta:[{name:"description",content:()=>{var a;return((a=t.value)==null?void 0:a.description)||"Product not found"}},{property:"og:title",content:()=>t.value?`${t.value.name} - Long Châu`:"Product Not Found"},{property:"og:description",content:()=>{var a;return((a=t.value)==null?void 0:a.description)||"Product not found"}},{property:"og:image",content:()=>{var a;return((a=t.value)==null?void 0:a.image)||"/placeholder-product.jpg"}}]}),(a,s)=>{const u=O,y=A;return o(k)?(l(),r("div",G,s[1]||(s[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):o(t)?(l(),r("div",J,[e("div",K,[e("nav",W,[e("ol",X,[e("li",Y,[v(u,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:x(()=>s[2]||(s[2]=[p("Home")])),_:1,__:[2]})]),e("li",null,[e("div",Z,[s[4]||(s[4]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),v(u,{to:"/products",class:"ml-1 text-gray-500 hover:text-gray-700 md:ml-2"},{default:x(()=>s[3]||(s[3]=[p("Products")])),_:1,__:[3]})])]),o(t).category?(l(),r("li",ee,[e("div",te,[s[5]||(s[5]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),v(u,{to:`/category/${o(t).category.slug}`,class:"ml-1 text-gray-500 hover:text-gray-700 md:ml-2"},{default:x(()=>[p(n(o(t).category.name),1)]),_:1},8,["to"])])])):c("",!0),e("li",null,[e("div",se,[s[6]||(s[6]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),e("span",oe,n(o(t).name),1)])])])]),e("div",le,[e("div",re,[e("div",ae,[e("img",{src:o(g)||o(t).image||"/placeholder-product.jpg",alt:o(t).name,class:"w-full h-full object-cover"},null,8,ne)]),o(t).images&&o(t).images.length>1?(l(),r("div",de,[(l(!0),r(h,null,b(o(t).images,(i,B)=>(l(),r("button",{key:B,onClick:Ue=>g.value=i,class:P([{"ring-2 ring-blue-500":o(g)===i},"flex-shrink-0 w-20 h-20 bg-gray-100 rounded-lg overflow-hidden hover:ring-2 hover:ring-gray-300"])},[e("img",{src:i,alt:`${o(t).name} ${B+1}`,class:"w-full h-full object-cover"},null,8,ce)],10,ie))),128))])):c("",!0)]),e("div",ue,[e("div",null,[e("h1",ge,n(o(t).name),1),o(t).brand?(l(),r("p",me,n(o(t).brand),1)):c("",!0)]),e("div",ve,[e("div",xe,[e("div",pe,[(l(),r(h,null,b(5,i=>e("svg",{key:i,class:P([i<=(o(t).rating||0)?"text-yellow-400":"text-gray-300","w-5 h-5"]),fill:"currentColor",viewBox:"0 0 20 20"},s[7]||(s[7]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))]),e("span",fe,n(o(t).rating||0)+" ("+n(o(t).reviewCount||0)+" reviews)",1)])]),e("div",_e,[o(t).discount>0?(l(),r("div",ye,[e("span",he,"$"+n(o(M).toFixed(2)),1),e("span",be,"$"+n(o(t).price.toFixed(2)),1),e("span",we,n(o(t).discount)+"% OFF ",1)])):(l(),r("div",ke," $"+n(o(t).price.toFixed(2)),1))]),e("div",Ce,[o(t).stock>0?(l(),r("div",Be,[s[8]||(s[8]=e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("span",Pe,n(o(t).stock)+" in stock",1)])):(l(),r("div",ze,s[9]||(s[9]=[e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),e("span",{class:"font-medium"},"Out of stock",-1)])))]),e("div",Le,[o(t).prescriptionRequired?(l(),r("div",Me,s[10]||(s[10]=[e("svg",{class:"w-5 h-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),e("span",{class:"text-red-800 text-sm font-medium"},"Prescription required for this medication",-1)]))):c("",!0),o(t).stock<=5&&o(t).stock>0?(l(),r("div",Ne,[s[11]||(s[11]=e("svg",{class:"w-5 h-5 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",Fe,"Only "+n(o(t).stock)+" left in stock",1)])):c("",!0)]),o(t).stock>0?(l(),r("div",$e,[e("div",Ve,[s[12]||(s[12]=e("label",{class:"text-sm font-medium text-gray-700"},"Quantity:",-1)),e("div",Re,[e("button",{onClick:F,disabled:o(d)<=1,class:"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50"}," - ",8,Te),q(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>H(d)?d.value=i:null),type:"number",min:1,max:o(t).stock,class:"w-16 px-2 py-2 text-center border-0 focus:ring-0"},null,8,je),[[D,o(d),void 0,{number:!0}]]),e("button",{onClick:N,disabled:o(d)>=o(t).stock,class:"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50"}," + ",8,Ie)])]),e("div",{class:"flex space-x-4"},[e("button",{onClick:C,class:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}," Add to Cart "),e("button",{onClick:$,class:"flex-1 bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"}," Buy Now ")])])):c("",!0),e("div",Se,[e("div",null,[s[13]||(s[13]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Product Description",-1)),e("p",qe,n(o(t).description),1)])])])]),o(_).length>0?(l(),r("div",De,[s[14]||(s[14]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-8"},"Related Products",-1)),e("div",He,[(l(!0),r(h,null,b(o(_),i=>(l(),Q(y,{key:i.id,product:i,onAddToCart:C},null,8,["product"]))),128))])])):c("",!0)])])):(l(),r("div",Oe,[e("div",Qe,[s[16]||(s[16]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Product Not Found",-1)),s[17]||(s[17]=e("p",{class:"text-gray-600 mb-8"},"The product you're looking for doesn't exist or has been removed.",-1)),v(u,{to:"/products",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700"},{default:x(()=>s[15]||(s[15]=[p(" Browse Products ")])),_:1,__:[15]})])]))}}},Xe=U(Ae,[["__scopeId","data-v-9ac1b113"]]);export{Xe as default};
