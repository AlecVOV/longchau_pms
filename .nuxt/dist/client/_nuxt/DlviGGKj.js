import{i as ge,r as x,c as h,j as B,x as he,H as _e,a as i,b as t,e as M,w as R,d as u,F as Z,g as K,h as c,f as b,v as _,n as f,t as r,E as ae,k as le,A as ke,_ as Ce,I as J,o as n}from"./4Al0cLfe.js";import{u as we}from"./BC9IWa7q.js";import{u as Ne}from"./-W0ciY3d.js";import Se from"./Dmxm_RQe.js";import{_ as Pe}from"./DlAUqK2U.js";const Fe={class:"py-8 md:py-12"},qe={class:"container-custom"},Ve={key:0,class:"bg-white rounded-lg shadow-sm p-8 text-center"},Oe={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},$e={class:"lg:col-span-2 space-y-6"},Ae={class:"bg-white rounded-lg shadow-sm p-6"},Ie={class:"flex items-center justify-between"},Me={key:0},je={key:1,class:"i-iconify-ph-check-bold"},De={key:0,class:"bg-white rounded-lg shadow-sm p-6 animate-fade-in"},Ee={class:"space-y-4"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ze={key:0,class:"text-accent-600 text-xs mt-1"},Te={key:0,class:"text-accent-600 text-xs mt-1"},Le={class:"mt-6"},Ye={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Be={key:0,class:"text-accent-600 text-xs mt-1"},Re={key:0,class:"text-accent-600 text-xs mt-1"},Ze={class:"md:col-span-2"},Ke={key:0,class:"text-accent-600 text-xs mt-1"},He={key:0,class:"text-accent-600 text-xs mt-1"},Ge={key:0,class:"text-accent-600 text-xs mt-1"},Qe={class:"mt-6"},We={class:"space-y-3"},Je=["onClick"],Xe={key:0,class:"w-3 h-3 rounded-full bg-primary-600"},et={class:"flex-grow"},tt={class:"font-medium text-neutral-800"},st={class:"text-sm text-neutral-500"},at={class:"text-right"},lt={class:"font-semibold text-neutral-800"},rt={class:"text-xs text-neutral-500"},it={class:"mt-6"},nt={key:0,class:"mt-6 bg-primary-50 border border-primary-100 rounded-md p-4"},ot={class:"flex"},dt={class:"flex items-center"},ut={for:"prescription",class:"btn-outline text-sm py-1.5 cursor-pointer"},ct={key:0,class:"ml-3 text-sm text-primary-600"},pt={class:"flex justify-between mt-8"},mt=["disabled"],vt={key:1,class:"bg-white rounded-lg shadow-sm p-6 animate-fade-in"},ft={class:"space-y-4"},xt={class:"flex items-center mb-4"},bt={class:"ml-6 flex items-center"},yt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gt={key:0,class:"text-accent-600 text-xs mt-1"},ht={key:0,class:"text-accent-600 text-xs mt-1"},_t={class:"md:col-span-2"},kt={key:0,class:"text-accent-600 text-xs mt-1"},Ct={key:0,class:"text-accent-600 text-xs mt-1"},wt={key:0,class:"text-accent-600 text-xs mt-1"},Nt={key:0,class:"mt-6 p-4 border border-neutral-200 rounded-lg"},St={class:"flex justify-between mt-8"},Pt=["disabled"],Ft={key:2,class:"bg-white rounded-lg shadow-sm p-6 animate-fade-in"},qt={class:"space-y-6"},Vt={class:"font-medium text-neutral-800 mb-3"},Ot={class:"space-y-4 max-h-60 overflow-y-auto pr-2"},$t=["src","alt"],At={class:"flex-grow"},It={class:"font-medium text-neutral-800"},Mt={class:"flex justify-between mt-1"},jt={class:"text-sm text-neutral-500"},Dt={class:"font-medium text-neutral-800"},Et={class:"border-t border-neutral-200 pt-4"},Ut={class:"flex justify-between items-center mb-2"},zt={class:"bg-neutral-50 rounded-lg p-3 text-sm"},Tt={class:"font-medium text-neutral-800"},Lt={class:"mt-1"},Yt={key:0,class:"mt-2 text-neutral-600 italic"},Bt={class:"mt-2 text-neutral-600"},Rt={class:"border-t border-neutral-200 pt-4"},Zt={class:"flex justify-between items-center mb-2"},Kt={class:"bg-neutral-50 rounded-lg p-3 text-sm"},Ht={key:0},Gt={class:"flex items-center"},Qt={key:1,class:"i-iconify-ph-credit-card-fill text-xl mr-2 text-neutral-400"},Wt={key:1},Jt={key:2,class:"mt-2"},Xt={key:3,class:"mt-2"},es={key:0,class:"border-t border-neutral-200 pt-4"},ts={class:"bg-neutral-50 rounded-lg p-3 text-sm"},ss={key:0},as={class:"flex items-center"},ls={class:"font-medium"},rs={key:1,class:"text-accent-600"},is={class:"flex justify-between mt-8"},ns=["disabled"],os={key:3,class:"bg-white rounded-lg shadow-sm p-6 text-center animate-fade-in"},ds={class:"max-w-md mx-auto bg-neutral-50 rounded-lg p-4 text-left mb-8"},us={class:"font-semibold text-neutral-800 mb-2"},cs={class:"text-sm text-neutral-600 mb-4"},ps={class:"border-t border-neutral-200 pt-3 mt-3"},ms={class:"flex justify-between text-sm text-neutral-600 mb-1"},vs={class:"flex justify-between text-sm text-neutral-600 mb-1"},fs={key:0},xs={key:1},bs={class:"flex justify-between text-sm text-neutral-600 mb-1"},ys={class:"flex justify-between font-semibold text-neutral-800 mt-2 text-base"},gs={class:"space-x-4"},hs={key:0,class:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg"},_s={class:"lg:col-span-1"},ks={class:"bg-white rounded-lg shadow-sm overflow-hidden lg:sticky lg:top-8 lg:max-h-[calc(100vh-6rem)]"},Cs={class:"p-4 sm:p-6 lg:overflow-y-auto lg:max-h-[calc(100vh-12rem)]"},ws={key:0,class:"max-h-60 lg:max-h-none overflow-y-auto mb-4"},Ns=["src","alt"],Ss={class:"ml-3 flex-1"},Ps={class:"text-sm font-medium text-neutral-800 line-clamp-1"},Fs={class:"flex items-center justify-between mt-1"},qs={class:"text-sm text-neutral-500"},Vs={class:"text-sm font-medium"},Os={class:"space-y-3 mb-6"},$s={class:"flex justify-between"},As={class:"font-medium text-neutral-800"},Is={class:"flex justify-between"},Ms={key:0,class:"text-success-500 font-medium"},js={key:1,class:"font-medium text-neutral-800"},Ds={class:"flex justify-between"},Es={class:"font-medium text-neutral-800"},Us={key:0,class:"flex justify-between text-success-600"},zs={class:"border-t border-neutral-200 pt-3 mt-3"},Ts={class:"flex justify-between"},Ls={class:"font-bold text-lg text-neutral-900"},Ys={key:1,class:"mb-6"},Bs={class:"flex gap-2"},Rs={key:0,class:"text-sm text-accent-600 mt-1"},Zs={key:1,class:"text-sm text-success-600 mt-1"},Ks={__name:"checkout",setup(Hs){const k=ge(),y=Ne(),j=[{id:"shipping",name:"Shipping"},{id:"payment",name:"Payment"},{id:"review",name:"Review"},{id:"confirmation",name:"Confirmation"}],v=x(0),C=x(!0),F=x(""),q=x(""),$=x(""),V=x(0),l=x({}),H=x(""),D=x(!1),E=x(!1),re=x(null),U=x({method:"credit-card",cardDetails:{}}),z=h(()=>U.value.method||"credit-card"),w=h(()=>k.items),T=h(()=>k.itemCount),S=h(()=>k.total),o=x({email:"",phone:"",firstName:"",lastName:"",address:"",zipCode:"",country:"VN",shippingMethod:"standard",specialInstructions:"",prescriptionFile:null}),p=x({firstName:"",lastName:"",address:"",zipCode:"",country:"VN"}),N=x({cardNumber:"",cardName:"",expiryDate:"",cvv:""}),ie=()=>[{id:"standard",name:"Standard Shipping",price:S.value>50?0:5.99,description:"Delivery in 3-5 business days",eta:"Arrives by "+Q(5)},{id:"express",name:"Express Shipping",price:12.99,description:"Delivery in 2-3 business days",eta:"Arrives by "+Q(3)},{id:"next-day",name:"Next Day Delivery",price:19.99,description:"Guaranteed delivery on the next business day",eta:"Arrives by "+Q(1)}],A=h(()=>ie()),P=h(()=>{try{return A.value.find(e=>e.id===o.value.shippingMethod)||A.value[0]||{id:"standard",name:"Standard Shipping",price:5.99}}catch(a){return console.warn("Error in selectedShippingOption computed:",a),{id:"standard",name:"Standard Shipping",price:5.99}}}),L=h(()=>{try{return S.value*.08}catch(a){return console.warn("Error calculating tax:",a),0}}),G=h(()=>{try{return S.value+P.value.price+L.value-V.value}catch(a){return console.warn("Error calculating order total:",a),S.value||0}}),I=h(()=>w.value.some(a=>a.isRx)),X=h(()=>{const a=N.value.cardNumber.replace(/\D/g,"");return a?a.startsWith("4")?"ph-visa-logo":/^5[1-5]/.test(a)?"ph-mastercard-logo":/^3[47]/.test(a)?"ph-american-express-logo":/^6(?:011|5)/.test(a)?"ph-discover-logo":"ph-credit-card-fill":null}),ee=h(()=>{if(v.value===0){const e=["email","phone","firstName","lastName","address","zipCode","country"].every(m=>!!o.value[m]),d=!!o.value.shippingMethod,s=!I.value||I.value&&o.value.prescriptionFile;return e&&d&&s}return v.value===1?!C.value&&!["firstName","lastName","address","zipCode","country"].every(e=>!!p.value[e])?!1:E.value:!0}),te=h(()=>ee.value);function O(a){if(console.log("goToStep called with step:",a,"current activeStep:",v.value),a<0||a>=j.length){console.warn("Invalid step:",a);return}if(a>v.value&&!ne(v.value)){y.error("Please complete all required fields before proceeding.");return}l.value={},v.value=a,a>0&&y.success(`Proceeding to ${j[a].name}`),window.scrollTo({top:0,behavior:"smooth"}),J(()=>{try{const e=document.querySelector(".checkout-step-content");e&&e.focus()}catch(e){console.warn("Focus management failed:",e)}}),console.log("goToStep completed, activeStep is now:",v.value)}function ne(a){l.value={};let e=!0;return a===0&&(o.value.email?me(o.value.email)||(l.value.email="Please enter a valid email address",e=!1):(l.value.email="Email is required",e=!1),o.value.phone||(l.value.phone="Phone number is required",e=!1),o.value.firstName||(l.value.firstName="First name is required",e=!1),o.value.lastName||(l.value.lastName="Last name is required",e=!1),o.value.address||(l.value.address="Address is required",e=!1),o.value.zipCode||(l.value.zipCode="Postal code is required",e=!1),I.value&&!o.value.prescriptionFile&&(y.warning("Please upload a prescription for prescription items"),e=!1)),a===1&&(C.value||(p.value.firstName||(l.value.billingFirstName="First name is required",e=!1),p.value.lastName||(l.value.billingLastName="Last name is required",e=!1),p.value.address||(l.value.billingAddress="Address is required",e=!1),p.value.zipCode||(l.value.billingZipCode="Postal code is required",e=!1)),z.value==="credit-card"&&(N.value.cardNumber?ve(N.value.cardNumber)||(l.value.cardNumber="Please enter a valid card number",e=!1):(l.value.cardNumber="Card number is required",e=!1),N.value.cardName||(l.value.cardName="Name on card is required",e=!1),N.value.expiryDate?fe(N.value.expiryDate)||(l.value.expiryDate="Please enter a valid expiry date (MM/YY)",e=!1):(l.value.expiryDate="Expiry date is required",e=!1),N.value.cvv?xe(N.value.cvv)||(l.value.cvv="Please enter a valid CVV",e=!1):(l.value.cvv="CVV is required",e=!1))),e}function Q(a){const e=new Date;return e.setDate(e.getDate()+a),e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function se(a){return{VN:"Vietnam",US:"United States",CA:"Canada"}[a]||a}function oe(){const a=A.value.find(e=>e.id===o.value.shippingMethod);return a?a.name:"Standard Shipping"}function de(a){const e=a.target.files[0];e&&(o.value.prescriptionFile=e)}function ue(){if(q.value="",$.value="",F.value.trim()===""){q.value="Please enter a promo code";return}F.value.toLowerCase()==="welcome10"?(V.value=S.value*.1,$.value="Promo code applied successfully! You saved $"+V.value.toFixed(2)):F.value.toLowerCase()==="freeship"?P.value.price>0?(V.value=P.value.price,$.value="Free shipping applied!"):q.value="Free shipping is already applied to orders over $50":q.value="Invalid promo code"}const ce=a=>{console.log("Payment validation changed:",a),E.value=a};async function pe(){var a,e;if(!te.value){y.error("Please complete all required fields before placing your order.");return}if(!E.value){y.error("Please complete your payment information.");return}try{D.value=!0,H.value="MDP-"+Math.floor(1e5+Math.random()*9e5);const d={orderNumber:H.value,items:w.value.map(g=>({id:g.id,name:g.name,price:g.price,quantity:g.quantity})),shipping:o.value,billing:C.value?o.value:p.value,paymentMethod:U.value.method,subtotal:S.value,tax:L.value,shippingFee:P.value.price,total:G.value,status:"pending",createdAt:new Date().toISOString()};console.log("Checkout: Preparing order data:",d),console.log("Checkout: Cart items before order:",w.value.length),console.log("Checkout: Using Cash on Delivery - no payment processing required");const m=await we().createOrder(d);if(console.log("Checkout: Order creation result:",m),m){console.log("Checkout: Order created successfully, clearing cart...");try{const g=k.forceCloseCart();console.log("Checkout: Cart clearing result:",g),k.clearCart(),["pharmacy-cart","pharmacy-cart-guest",`pharmacy-cart-${k.getCurrentUserId()}`].forEach(Y=>{try{localStorage.removeItem(Y)}catch(ye){console.warn(`Failed to remove ${Y}:`,ye)}}),await J(),g||w.value.length===0?y.success("Order placed successfully! Your cart has been cleared."):(y.success("Order placed successfully!"),console.warn("Cart clearing may have failed, but order was successful"))}catch(g){console.error("Cart clearing failed:",g),y.success("Order placed successfully! Please refresh to clear your cart.")}O(3),window.scrollTo({top:0,behavior:"smooth"}),console.log("Order placement completed successfully, activeStep is now:",v.value)}else throw new Error("Order creation failed")}catch(d){console.error("Order placement failed:",d),console.error("Error details:",{message:d.message,status:d.status,data:d.data,stack:d.stack}),(a=d.message)!=null&&a.includes("stock")?y.error("Some items in your cart are out of stock. Please update your cart and try again."):(e=d.message)!=null&&e.includes("payment")?y.error("Payment processing failed. Please check your payment details and try again."):y.error("Failed to place order. Please try again or contact support if the problem persists.")}finally{D.value=!1,console.log("placeOrder function completed, isProcessingPayment:",D.value)}}function me(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}function ve(a){const e=a.replace(/\s+/g,"");return e.length>=13&&e.length<=19&&!isNaN(e)}function fe(a){if(!/^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(a))return!1;const d=a.split("/"),s=parseInt(d[0],10),m=parseInt("20"+d[1],10),g=new Date,W=g.getFullYear(),Y=g.getMonth()+1;return!(m<W||m===W&&s<Y)}function xe(a){return/^[0-9]{3,4}$/.test(a)}B(C,a=>{a&&(l.value={...l.value,billingFirstName:null,billingLastName:null,billingAddress:null,billingZipCode:null,billingCountry:null})}),B(()=>o.value,a=>{try{C.value&&a&&(p.value={firstName:a.firstName||"",lastName:a.lastName||"",address:a.address||"",zipCode:a.zipCode||"",country:a.country||"VN"})}catch(e){console.warn("Error updating billing address:",e)}},{deep:!0}),B(F,()=>{q.value="",$.value=""});const be=async()=>{try{console.log("Manually clearing cart..."),k.clearCart();const a=k.forceCloseCart();return["pharmacy-cart","pharmacy-cart-guest",`pharmacy-cart-${k.getCurrentUserId()}`].forEach(d=>{try{localStorage.removeItem(d)}catch(s){console.warn(`Failed to remove ${d}:`,s)}}),Object.keys(localStorage).forEach(d=>{if(d.includes("pharmacy-cart"))try{localStorage.removeItem(d)}catch(s){console.warn(`Failed to remove ${d}:`,s)}}),await J(),y.success("Cart cleared successfully!"),console.log("Cart cleared successfully"),!0}catch(a){return console.error("Error clearing cart:",a),y.error("Failed to clear cart. Please refresh the page."),!1}};return B(()=>o.value.shippingMethod,(a,e)=>{try{if(a!==e&&F.value.toLowerCase()==="freeship"){const d=A.value.find(s=>s.id===a);d&&typeof d.price=="number"&&(V.value=d.price)}}catch(d){console.warn("Error updating shipping discount:",d)}}),he(()=>{try{console.log("Checkout page mounted, cart items:",T.value),T.value===0&&(console.log("Cart is empty, redirecting to cart page"),_e("/cart"))}catch(a){console.error("Error in checkout onMounted:",a)}}),(a,e)=>{const d=Ce;return n(),i("div",Fe,[t("div",qe,[e[86]||(e[86]=t("h1",{class:"text-2xl md:text-3xl font-bold text-neutral-900 mb-6"},"Checkout",-1)),w.value.length===0?(n(),i("div",Ve,[e[23]||(e[23]=t("div",{class:"w-20 h-20 mx-auto mb-4 rounded-full bg-neutral-100 flex items-center justify-center"},[t("span",{class:"i-iconify-ph-shopping-cart-fill text-3xl text-neutral-400"})],-1)),e[24]||(e[24]=t("h2",{class:"text-xl font-semibold text-neutral-800 mb-3"},"Your cart is empty",-1)),e[25]||(e[25]=t("p",{class:"text-neutral-600 mb-6"},"You need to add items to your cart before proceeding to checkout.",-1)),M(d,{to:"/",class:"btn-primary"},{default:R(()=>e[22]||(e[22]=[c("Browse Products")])),_:1,__:[22]})])):(n(),i("div",Oe,[t("div",$e,[t("div",Ae,[t("div",Ie,[(n(),i(Z,null,K(j,(s,m)=>t("div",{key:s.id,class:"flex-1 flex flex-col items-center"},[t("div",{class:f(["w-8 h-8 rounded-full flex items-center justify-center mb-2 relative text-sm",[v.value===m?"bg-primary-600 text-white":v.value>m?"bg-primary-500 text-white":"bg-neutral-200 text-neutral-600"]])},[v.value<=m?(n(),i("span",Me,r(m+1),1)):(n(),i("span",je)),m<j.length-1?(n(),i("div",{key:2,class:f(["absolute top-1/2 transform -translate-y-1/2 w-full h-0.5 left-1/2",[v.value>m?"bg-primary-500":"bg-neutral-200"]])},null,2)):u("",!0)],2),t("span",{class:f(["text-sm font-medium hidden md:block",[v.value===m?"text-primary-600":v.value>m?"text-primary-500":"text-neutral-500"]])},r(s.name),3)])),64))])]),v.value===0?(n(),i("div",De,[e[44]||(e[44]=t("h2",{class:"text-xl font-semibold mb-6 flex items-center"},[t("span",{class:"i-iconify-ph-truck-fill text-xl text-primary-600 mr-2"}),c(" Shipping Information ")],-1)),t("div",Ee,[t("div",null,[e[28]||(e[28]=t("h3",{class:"font-medium text-neutral-800 mb-3"},"Contact Information",-1)),t("div",Ue,[t("div",null,[e[26]||(e[26]=t("label",{for:"email",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Email Address "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.email=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.email}]),required:""},null,2),[[_,o.value.email]]),l.value.email?(n(),i("p",ze,r(l.value.email),1)):u("",!0)]),t("div",null,[e[27]||(e[27]=t("label",{for:"phone",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Phone Number "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"tel",id:"phone","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.phone=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.phone}]),required:""},null,2),[[_,o.value.phone]]),l.value.phone?(n(),i("p",Te,r(l.value.phone),1)):u("",!0)])])]),t("div",Le,[e[35]||(e[35]=t("h3",{class:"font-medium text-neutral-800 mb-3"},"Shipping Address",-1)),t("div",Ye,[t("div",null,[e[29]||(e[29]=t("label",{for:"firstName",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("First Name "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"text",id:"firstName","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.firstName=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.firstName}]),required:""},null,2),[[_,o.value.firstName]]),l.value.firstName?(n(),i("p",Be,r(l.value.firstName),1)):u("",!0)]),t("div",null,[e[30]||(e[30]=t("label",{for:"lastName",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Last Name "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"text",id:"lastName","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.lastName=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.lastName}]),required:""},null,2),[[_,o.value.lastName]]),l.value.lastName?(n(),i("p",Re,r(l.value.lastName),1)):u("",!0)]),t("div",Ze,[e[31]||(e[31]=t("label",{for:"address",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Address "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"text",id:"address","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.address=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.address}]),required:""},null,2),[[_,o.value.address]]),l.value.address?(n(),i("p",Ke,r(l.value.address),1)):u("",!0)]),t("div",null,[e[32]||(e[32]=t("label",{for:"zipCode",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Postal Code "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"text",id:"zipCode","onUpdate:modelValue":e[5]||(e[5]=s=>o.value.zipCode=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.zipCode}]),required:""},null,2),[[_,o.value.zipCode]]),l.value.zipCode?(n(),i("p",He,r(l.value.zipCode),1)):u("",!0)]),t("div",null,[e[34]||(e[34]=t("label",{for:"country",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Country "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("select",{id:"country","onUpdate:modelValue":e[6]||(e[6]=s=>o.value.country=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.country}]),required:""},e[33]||(e[33]=[t("option",{value:"VN"},"Vietnam",-1)]),2),[[ae,o.value.country]]),l.value.country?(n(),i("p",Ge,r(l.value.country),1)):u("",!0)])])]),t("div",Qe,[e[36]||(e[36]=t("h3",{class:"font-medium text-neutral-800 mb-3"},"Shipping Method",-1)),t("div",We,[(n(!0),i(Z,null,K(A.value,(s,m)=>(n(),i("div",{key:s.id,class:f(["border rounded-lg p-4 flex items-center cursor-pointer transition-colors",o.value.shippingMethod===s.id?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-primary-300"]),onClick:g=>o.value.shippingMethod=s.id},[t("div",{class:f(["w-5 h-5 rounded-full border-2 flex items-center justify-center mr-3",o.value.shippingMethod===s.id?"border-primary-600":"border-neutral-300"])},[o.value.shippingMethod===s.id?(n(),i("div",Xe)):u("",!0)],2),t("div",et,[t("p",tt,r(s.name),1),t("p",st,r(s.description),1)]),t("div",at,[t("p",lt,r(s.price===0?"Free":"$"+s.price.toFixed(2)),1),t("p",rt,r(s.eta),1)])],10,Je))),128))])]),t("div",it,[e[37]||(e[37]=t("label",{for:"instructions",class:"block text-sm font-medium text-neutral-700 mb-1"},"Special Instructions (Optional)",-1)),b(t("textarea",{id:"instructions","onUpdate:modelValue":e[7]||(e[7]=s=>o.value.specialInstructions=s),class:"input h-20",placeholder:"Any special delivery instructions or notes"},null,512),[[_,o.value.specialInstructions]])]),I.value?(n(),i("div",nt,[t("div",ot,[e[42]||(e[42]=t("span",{class:"i-iconify-ph-prescription-fill text-xl text-primary-600 mr-2 mt-0.5"},null,-1)),t("div",null,[e[40]||(e[40]=t("h3",{class:"font-medium text-primary-700 mb-1"},"Prescription Required",-1)),e[41]||(e[41]=t("p",{class:"text-sm text-primary-600 mb-3"}," One or more items in your order require a prescription. Please upload a valid prescription below. ",-1)),t("div",dt,[t("label",ut,[e[38]||(e[38]=t("span",{class:"i-iconify-ph-upload-simple text-lg mr-1"},null,-1)),e[39]||(e[39]=c(" Upload Prescription ")),t("input",{type:"file",id:"prescription",class:"hidden",accept:".jpg,.jpeg,.png,.pdf",onChange:de},null,32)]),o.value.prescriptionFile?(n(),i("span",ct,r(o.value.prescriptionFile.name),1)):u("",!0)])])])])):u("",!0)]),t("div",pt,[M(d,{to:"/cart",class:"btn-outline"},{default:R(()=>e[43]||(e[43]=[c("Return to Cart")])),_:1,__:[43]}),t("button",{onClick:e[8]||(e[8]=s=>O(1)),class:"btn-primary",disabled:!ee.value},"Continue to Payment",8,mt)])])):u("",!0),v.value===1?(n(),i("div",vt,[e[55]||(e[55]=t("h2",{class:"text-xl font-semibold mb-6 flex items-center"},[t("span",{class:"i-iconify-ph-credit-card-fill text-xl text-primary-600 mr-2"}),c(" Payment Method ")],-1)),t("div",ft,[t("div",null,[t("div",xt,[e[46]||(e[46]=t("h3",{class:"font-medium text-neutral-800"},"Billing Address",-1)),t("div",bt,[b(t("input",{type:"checkbox",id:"sameAsShipping","onUpdate:modelValue":e[9]||(e[9]=s=>C.value=s),class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,512),[[ke,C.value]]),e[45]||(e[45]=t("label",{for:"sameAsShipping",class:"ml-2 text-sm text-neutral-700"}," Same as shipping address ",-1))])]),C.value?u("",!0):(n(),i("div",yt,[t("div",null,[e[47]||(e[47]=t("label",{for:"billingFirstName",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("First Name "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"text",id:"billingFirstName","onUpdate:modelValue":e[10]||(e[10]=s=>p.value.firstName=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.billingFirstName}]),required:""},null,2),[[_,p.value.firstName]]),l.value.billingFirstName?(n(),i("p",gt,r(l.value.billingFirstName),1)):u("",!0)]),t("div",null,[e[48]||(e[48]=t("label",{for:"billingLastName",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Last Name "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"text",id:"billingLastName","onUpdate:modelValue":e[11]||(e[11]=s=>p.value.lastName=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.billingLastName}]),required:""},null,2),[[_,p.value.lastName]]),l.value.billingLastName?(n(),i("p",ht,r(l.value.billingLastName),1)):u("",!0)]),t("div",_t,[e[49]||(e[49]=t("label",{for:"billingAddress",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Street Address "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"text",id:"billingAddress","onUpdate:modelValue":e[12]||(e[12]=s=>p.value.address=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.billingAddress}]),required:""},null,2),[[_,p.value.address]]),l.value.billingAddress?(n(),i("p",kt,r(l.value.billingAddress),1)):u("",!0)]),t("div",null,[e[50]||(e[50]=t("label",{for:"billingZipCode",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Postal Code "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("input",{type:"text",id:"billingZipCode","onUpdate:modelValue":e[13]||(e[13]=s=>p.value.zipCode=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.billingZipCode}]),required:""},null,2),[[_,p.value.zipCode]]),l.value.billingZipCode?(n(),i("p",Ct,r(l.value.billingZipCode),1)):u("",!0)]),t("div",null,[e[52]||(e[52]=t("label",{for:"billingCountry",class:"block text-sm font-medium text-neutral-700 mb-1"},[c("Country "),t("span",{class:"text-accent-500"},"*")],-1)),b(t("select",{id:"billingCountry","onUpdate:modelValue":e[14]||(e[14]=s=>p.value.country=s),class:f(["input",{"border-accent-500 focus:ring-accent-500":l.value.billingCountry}]),required:""},e[51]||(e[51]=[t("option",{value:"VN"},"Vietnam",-1)]),2),[[ae,p.value.country]]),l.value.billingCountry?(n(),i("p",wt,r(l.value.billingCountry),1)):u("",!0)])]))]),M(Se,{ref_key:"paymentFormRef",ref:re,modelValue:U.value,"onUpdate:modelValue":e[15]||(e[15]=s=>U.value=s),disabled:D.value,onValidationChange:ce},null,8,["modelValue","disabled"]),e[54]||(e[54]=le('<div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg" data-v-7c7dab79><div class="flex items-start" data-v-7c7dab79><svg class="w-5 h-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" data-v-7c7dab79><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-7c7dab79></path></svg><div data-v-7c7dab79><h4 class="text-sm font-medium text-blue-800 mb-1" data-v-7c7dab79>Payment Information</h4><div class="text-sm text-blue-700 space-y-1" data-v-7c7dab79><p data-v-7c7dab79>• Your payment will be processed securely using 256-bit SSL encryption</p><p data-v-7c7dab79>• No payment will be charged until your order is confirmed</p><p data-v-7c7dab79>• You can review your order before completing the purchase</p></div></div></div></div>',1)),z.value==="paypal"?(n(),i("div",Nt,e[53]||(e[53]=[t("div",{class:"text-center"},[t("p",{class:"mb-4 text-neutral-700"},"You will be redirected to PayPal to complete your payment securely."),t("img",{src:"https://placehold.co/200x60?text=PayPal",alt:"PayPal",class:"h-8 mx-auto"})],-1)]))):u("",!0)]),t("div",St,[t("button",{onClick:e[16]||(e[16]=s=>O(0)),class:"btn-outline"},"Back to Shipping"),t("button",{onClick:e[17]||(e[17]=s=>O(2)),class:"btn-primary",disabled:!E.value},"Continue to Review",8,Pt)])])):u("",!0),v.value===2?(n(),i("div",Ft,[e[68]||(e[68]=t("h2",{class:"text-xl font-semibold mb-6 flex items-center"},[t("span",{class:"i-iconify-ph-clipboard-text-fill text-xl text-primary-600 mr-2"}),c(" Review Your Order ")],-1)),t("div",qt,[t("div",null,[t("h3",Vt,"Order Items ("+r(T.value)+")",1),t("div",Ot,[(n(!0),i(Z,null,K(w.value,(s,m)=>(n(),i("div",{key:m,class:"flex items-center gap-3 py-2 border-b border-neutral-100 last:border-b-0"},[t("img",{src:s.image,alt:s.name,class:"w-14 h-14 object-cover rounded-md"},null,8,$t),t("div",At,[t("p",It,r(s.name),1),t("div",Mt,[t("p",jt,"Qty: "+r(s.quantity),1),t("p",Dt,"$"+r((s.price*s.quantity).toFixed(2)),1)])])]))),128))])]),t("div",Et,[t("div",Ut,[e[56]||(e[56]=t("h3",{class:"font-medium text-neutral-800"},"Shipping Information",-1)),t("button",{onClick:e[18]||(e[18]=s=>O(0)),class:"text-sm text-primary-600 hover:text-primary-700"}," Edit ")]),t("div",zt,[t("p",Tt,r(o.value.firstName)+" "+r(o.value.lastName),1),t("p",null,r(o.value.address),1),t("p",null,r(o.value.zipCode),1),t("p",null,r(se(o.value.country)),1),t("p",Lt,r(o.value.email),1),t("p",null,r(o.value.phone),1),o.value.specialInstructions?(n(),i("p",Yt,[e[57]||(e[57]=t("span",{class:"font-medium"},"Special Instructions:",-1)),c(" "+r(o.value.specialInstructions),1)])):u("",!0),t("p",Bt,[e[58]||(e[58]=t("span",{class:"font-medium"},"Shipping Method:",-1)),c(" "+r(oe()),1)])])]),t("div",Rt,[t("div",Zt,[e[59]||(e[59]=t("h3",{class:"font-medium text-neutral-800"},"Payment Information",-1)),t("button",{onClick:e[19]||(e[19]=s=>O(1)),class:"text-sm text-primary-600 hover:text-primary-700"}," Edit ")]),t("div",Kt,[z.value==="credit-card"?(n(),i("div",Ht,[t("div",Gt,[X.value?(n(),i("span",{key:0,class:f(`i-iconify-${X.value} text-xl mr-2`)},null,2)):(n(),i("span",Qt)),t("div",null,[e[60]||(e[60]=t("p",{class:"font-medium"},"Credit Card",-1)),t("p",null,"**** **** **** "+r(N.value.cardNumber.slice(-4)),1)])])])):z.value==="paypal"?(n(),i("div",Wt,e[61]||(e[61]=[t("div",{class:"flex items-center"},[t("span",{class:"i-iconify-ph-paypal-logo-fill text-xl mr-2 text-[#003087]"}),t("p",{class:"font-medium"},"PayPal")],-1)]))):u("",!0),C.value?(n(),i("div",Xt,e[63]||(e[63]=[t("p",{class:"text-neutral-600"},[t("span",{class:"font-medium"},"Billing Address:"),c(" Same as shipping")],-1)]))):(n(),i("div",Jt,[e[62]||(e[62]=t("p",{class:"font-medium mt-3"},"Billing Address:",-1)),t("p",null,r(p.value.firstName)+" "+r(p.value.lastName),1),t("p",null,r(p.value.address),1),t("p",null,r(p.value.zipCode),1),t("p",null,r(se(p.value.country)),1)]))])]),I.value?(n(),i("div",es,[e[67]||(e[67]=t("h3",{class:"font-medium text-neutral-800 mb-2"},"Prescription Information",-1)),t("div",ts,[o.value.prescriptionFile?(n(),i("div",ss,[t("div",as,[e[65]||(e[65]=t("span",{class:"i-iconify-ph-check-circle-fill text-lg text-success-500 mr-2"},null,-1)),t("p",null,[e[64]||(e[64]=c("Prescription uploaded: ")),t("span",ls,r(o.value.prescriptionFile.name),1)])])])):(n(),i("div",rs,e[66]||(e[66]=[t("span",{class:"i-iconify-ph-warning-circle-fill text-lg mr-2 align-text-bottom"},null,-1),t("span",null,"Prescription not uploaded. Please go back to the shipping step to upload your prescription.",-1)])))])])):u("",!0)]),t("div",is,[t("button",{onClick:e[20]||(e[20]=s=>O(1)),class:"btn-outline"},"Back to Payment"),t("button",{onClick:pe,class:"btn-primary",disabled:!te.value}," Place Order ",8,ns)])])):u("",!0),v.value===3?(n(),i("div",os,[e[76]||(e[76]=t("div",{class:"w-20 h-20 mx-auto mb-4 rounded-full bg-success-100 flex items-center justify-center"},[t("span",{class:"i-iconify-ph-check-fill text-4xl text-success-500"})],-1)),e[77]||(e[77]=t("h2",{class:"text-2xl font-bold text-neutral-900 mb-3"},"Thank You for Your Order!",-1)),e[78]||(e[78]=t("p",{class:"text-neutral-600 mb-6"},"Your order has been placed successfully.",-1)),t("div",ds,[t("p",us,"Order #"+r(H.value),1),t("p",cs,"A confirmation email has been sent to "+r(o.value.email),1),t("div",ps,[e[72]||(e[72]=t("p",{class:"font-medium text-neutral-800 mb-1"},"Order Summary",-1)),t("div",ms,[t("span",null,"Subtotal ("+r(T.value)+" items):",1),t("span",null,"$"+r(S.value.toFixed(2)),1)]),t("div",vs,[e[69]||(e[69]=t("span",null,"Shipping:",-1)),P.value.price===0?(n(),i("span",fs,"Free")):(n(),i("span",xs,"$"+r(P.value.price.toFixed(2)),1))]),t("div",bs,[e[70]||(e[70]=t("span",null,"Tax:",-1)),t("span",null,"$"+r(L.value.toFixed(2)),1)]),t("div",ys,[e[71]||(e[71]=t("span",null,"Total:",-1)),t("span",null,"$"+r(G.value.toFixed(2)),1)])])]),t("div",gs,[M(d,{to:"/account/orders",class:"btn-primary"},{default:R(()=>e[73]||(e[73]=[c(" View Your Orders ")])),_:1,__:[73]}),M(d,{to:"/",class:"btn-outline"},{default:R(()=>e[74]||(e[74]=[c(" Continue Shopping ")])),_:1,__:[74]})]),w.value.length>0?(n(),i("div",hs,[t("div",{class:"text-center"},[e[75]||(e[75]=t("p",{class:"text-sm text-amber-700 mb-3"},[t("span",{class:"i-iconify-ph-warning-fill text-lg mr-1"}),c(" Your cart still contains items. This might be a technical issue. ")],-1)),t("button",{onClick:be,class:"btn-outline text-sm"}," Clear Cart Manually ")])])):u("",!0)])):u("",!0)]),t("div",_s,[t("div",ks,[e[85]||(e[85]=t("div",{class:"p-4 sm:p-6 border-b border-neutral-200"},[t("h2",{class:"text-lg font-semibold text-neutral-800"},"Order Summary")],-1)),t("div",Cs,[w.value.length>0?(n(),i("div",ws,[(n(!0),i(Z,null,K(w.value,(s,m)=>(n(),i("div",{key:m,class:"flex items-center py-2 border-b border-neutral-100 last:border-b-0"},[t("img",{src:s.image,alt:s.name,class:"w-12 h-12 object-cover rounded-md"},null,8,Ns),t("div",Ss,[t("p",Ps,r(s.name),1),t("div",Fs,[t("p",qs,r(s.quantity)+" × $"+r(s.price.toFixed(2)),1),t("p",Vs,"$"+r((s.price*s.quantity).toFixed(2)),1)])])]))),128))])):u("",!0),t("div",Os,[t("div",$s,[e[79]||(e[79]=t("span",{class:"text-neutral-600"},"Subtotal",-1)),t("span",As,"$"+r(S.value.toFixed(2)),1)]),t("div",Is,[e[80]||(e[80]=t("span",{class:"text-neutral-600"},"Shipping",-1)),P.value.price===0?(n(),i("span",Ms,"Free")):(n(),i("span",js,"$"+r(P.value.price.toFixed(2)),1))]),t("div",Ds,[e[81]||(e[81]=t("span",{class:"text-neutral-600"},"Tax (8%)",-1)),t("span",Es,"$"+r(L.value.toFixed(2)),1)]),V.value>0?(n(),i("div",Us,[e[82]||(e[82]=t("span",null,"Discount",-1)),t("span",null,"-$"+r(V.value.toFixed(2)),1)])):u("",!0),t("div",zs,[t("div",Ts,[e[83]||(e[83]=t("span",{class:"font-semibold text-neutral-800"},"Total",-1)),t("span",Ls,"$"+r(G.value.toFixed(2)),1)])])]),v.value===0?(n(),i("div",Ys,[t("div",Bs,[b(t("input",{type:"text",placeholder:"Promo code","onUpdate:modelValue":e[21]||(e[21]=s=>F.value=s),class:"input flex-grow"},null,512),[[_,F.value]]),t("button",{onClick:ue,class:"btn-outline px-4 whitespace-nowrap"},"Apply")]),q.value?(n(),i("p",Rs,r(q.value),1)):u("",!0),$.value?(n(),i("p",Zs,r($.value),1)):u("",!0)])):u("",!0),e[84]||(e[84]=le('<div class="mt-6 bg-neutral-50 rounded-lg p-3" data-v-7c7dab79><h3 class="font-medium text-neutral-800 mb-2 text-sm" data-v-7c7dab79>Order Information</h3><ul class="text-xs space-y-1.5 text-neutral-600" data-v-7c7dab79><li class="flex" data-v-7c7dab79><span class="i-iconify-ph-shield-check-fill text-success-500 mr-1.5" data-v-7c7dab79></span><span data-v-7c7dab79>All transactions are secure and encrypted</span></li><li class="flex" data-v-7c7dab79><span class="i-iconify-ph-truck-fill text-primary-500 mr-1.5" data-v-7c7dab79></span><span data-v-7c7dab79>Orders are typically processed within 24 hours</span></li><li class="flex" data-v-7c7dab79><span class="i-iconify-ph-info-fill text-warning-500 mr-1.5" data-v-7c7dab79></span><span data-v-7c7dab79>Prescription items require verification before shipping</span></li><li class="flex" data-v-7c7dab79><span class="i-iconify-ph-first-aid-fill text-primary-500 mr-1.5" data-v-7c7dab79></span><span data-v-7c7dab79>Free shipping on orders over $50</span></li></ul></div>',1))])])])]))])])}}},ea=Pe(Ks,[["__scopeId","data-v-7c7dab79"]]);export{ea as default};
