import{s as G,B as J,r as n,c as v,x as Q,j as W,u as X,a as r,b as t,f as p,v as L,m as o,C as Y,D as y,F as C,g as S,t as c,E as ee,k as te,A as $,d as se,o as a,h as q,p as le}from"./4Al0cLfe.js";import{u as oe}from"./FiuJam0s.js";import ae from"./Drma5A4u.js";const re={class:"py-8"},ne={class:"container mx-auto px-4"},ie={class:"mb-8"},ue={class:"max-w-2xl"},ce={class:"relative"},de={class:"mt-2 flex flex-wrap gap-2"},me=["onClick"],pe={key:0},ge={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6"},ve={class:"text-xl font-semibold text-gray-900"},he={class:"text-gray-600 mt-1"},xe={class:"mt-4 lg:mt-0 flex items-center space-x-4"},fe={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},be={class:"lg:col-span-1"},ye={class:"bg-white rounded-lg shadow-sm border p-6 sticky top-8"},_e={class:"mb-6"},ke={class:"space-y-2"},we=["value"],Ce={class:"ml-2 text-sm text-gray-700"},Se={class:"text-gray-400"},Re={class:"mb-6"},Be={class:"space-y-3"},Ve={class:"flex items-center space-x-2"},$e={class:"space-y-1"},Me=["value","onChange"],Pe={class:"ml-2 text-sm text-gray-700"},Le={class:"mb-6"},Ue={class:"space-y-2"},qe=["value"],Fe={class:"ml-2 text-sm text-gray-700"},je={class:"text-gray-400"},Ne={class:"mb-6"},Ae={class:"space-y-2"},Ie={class:"flex items-center"},De={class:"flex items-center"},He={class:"lg:col-span-3"},Oe={key:0,class:"flex justify-center items-center py-12"},ze={key:1,class:"text-center py-12"},Ee={key:2,class:"space-y-6"},Te={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Ke={key:0,class:"text-center"},Ze={key:1,class:"text-center py-12"},Xe={__name:"search",setup(Ge){const M=oe(),F=G(),U=J(),i=n(""),h=n(""),R=n(!1),P=n(!1),u=n([]),x=n([]),f=n([]),d=n({min:0,max:1e3}),_=n(!1),k=n(!1),B=n("relevance"),m=n(12),j=n(["Paracetamol","Vitamin D","Ibuprofen","Cold medicine","Antibiotics","Blood pressure"]),N=[{label:"Under $10",min:0,max:10},{label:"$10 - $25",min:10,max:25},{label:"$25 - $50",min:25,max:50},{label:"$50 - $100",min:50,max:100},{label:"Over $100",min:100,max:1e3}],A=v(()=>M.categories),I=v(()=>A.value.filter(s=>u.value.some(e=>e.categoryId===s.id))),D=v(()=>[...new Set(u.value.map(e=>e.brand))].sort()),b=v(()=>{console.log("Computing filteredResults with searchResults:",u.value.length);let s=[...u.value];return x.value.length>0&&(s=s.filter(e=>x.value.includes(e.categoryId))),f.value.length>0&&(s=s.filter(e=>f.value.includes(e.brand))),s=s.filter(e=>e.price>=d.value.min&&e.price<=d.value.max),_.value&&(s=s.filter(e=>e.stock>0)),k.value&&(s=s.filter(e=>e.prescription)),console.log("Filtered results:",s.length),s}),H=v(()=>{console.log("Computing paginatedResults with filteredResults:",b.value.length);const s=b.value.slice(0,m.value);return console.log("Returning paginated results:",s.length),s}),V=async()=>{if(i.value.trim()){P.value=!0,R.value=!0,h.value=i.value;try{console.log("Searching for:",i.value);const s=await M.searchProducts(i.value);console.log("Search results received:",s.length),u.value=s,m.value=12,await F.push({path:"/search",query:{q:i.value}})}catch(s){console.error("Search failed:",s),u.value=[]}finally{P.value=!1}}},g=()=>{m.value=12},O=()=>{const s=[...u.value];switch(B.value){case"name":s.sort((e,l)=>e.name.localeCompare(l.name));break;case"name-desc":s.sort((e,l)=>l.name.localeCompare(e.name));break;case"price":s.sort((e,l)=>e.price-l.price);break;case"price-desc":s.sort((e,l)=>l.price-e.price);break;case"rating":s.sort((e,l)=>l.rating-e.rating);break}u.value=s,m.value=12},z=s=>{d.value={min:s.min,max:s.max},g()},E=()=>{x.value=[],f.value=[],d.value={min:0,max:1e3},_.value=!1,k.value=!1,m.value=12},T=()=>{m.value+=12},K=s=>u.value.filter(e=>e.categoryId===s).length,Z=s=>u.value.filter(e=>e.brand===s).length;return Q(async()=>{await M.fetchCategories();const s=U.query.q;s&&(i.value=s,await V())}),W(()=>U.query.q,s=>{s&&s!==i.value&&(i.value=s,V())}),X({title:v(()=>R.value&&h.value?`Search Results for "${h.value}" - Long Ch창u`:"Search Products - Long Ch창u"),meta:[{name:"description",content:v(()=>R.value&&h.value?`Search results for "${h.value}". Find medications, supplements, and health products at Long Ch창u.`:"Search for medications, supplements, and health products at Long Ch창u online pharmacy.")}]}),(s,e)=>(a(),r("div",re,[t("div",ne,[t("div",ie,[e[9]||(e[9]=t("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"Search Products",-1)),t("div",ue,[t("div",ce,[e[8]||(e[8]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>y(i)?i.value=l:null),type:"text",class:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-lg",placeholder:"Search for medications, supplements, or health products...",onKeyup:Y(V,["enter"])},null,544),[[L,o(i)]])]),t("div",de,[(a(!0),r(C,null,S(o(j),l=>(a(),r("button",{key:l,onClick:w=>{i.value=l,V()},class:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors"},c(l),9,me))),128))])])]),o(R)?(a(),r("div",pe,[t("div",ge,[t("div",null,[t("h2",ve,c(o(u).length)+' results for "'+c(o(h))+'" ',1),t("p",he," Showing "+c(Math.min(o(m),o(b).length))+" of "+c(o(b).length)+" products ",1)]),t("div",xe,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-gray-700"},"Sort by:",-1)),p(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>y(B)?B.value=l:null),onChange:O,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e[10]||(e[10]=[te('<option value="relevance">Relevance</option><option value="name">Name A-Z</option><option value="name-desc">Name Z-A</option><option value="price">Price: Low to High</option><option value="price-desc">Price: High to Low</option><option value="rating">Rating: High to Low</option>',6)]),544),[[ee,o(B)]])])]),t("div",fe,[t("div",be,[t("div",ye,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Filters",-1)),t("div",_e,[e[12]||(e[12]=t("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Category",-1)),t("div",ke,[(a(!0),r(C,null,S(o(I),l=>(a(),r("label",{key:l.id,class:"flex items-center"},[p(t("input",{"onUpdate:modelValue":e[2]||(e[2]=w=>y(x)?x.value=w:null),value:l.id,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:g},null,40,we),[[$,o(x)]]),t("span",Ce,[q(c(l.name)+" ",1),t("span",Se,"("+c(K(l.id))+")",1)])]))),128))])]),t("div",Re,[e[14]||(e[14]=t("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Price Range",-1)),t("div",Be,[t("div",Ve,[p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>o(d).min=l),type:"number",min:"0",placeholder:"Min",class:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:g},null,544),[[L,o(d).min,void 0,{number:!0}]]),e[13]||(e[13]=t("span",{class:"text-gray-500"},"to",-1)),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o(d).max=l),type:"number",min:"0",placeholder:"Max",class:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:g},null,544),[[L,o(d).max,void 0,{number:!0}]])]),t("div",$e,[(a(),r(C,null,S(N,l=>t("label",{key:l.label,class:"flex items-center"},[t("input",{value:l,type:"radio",name:"priceRange",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",onChange:w=>z(l)},null,40,Me),t("span",Pe,c(l.label),1)])),64))])])]),t("div",Le,[e[15]||(e[15]=t("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Brand",-1)),t("div",Ue,[(a(!0),r(C,null,S(o(D),l=>(a(),r("label",{key:l,class:"flex items-center"},[p(t("input",{"onUpdate:modelValue":e[5]||(e[5]=w=>y(f)?f.value=w:null),value:l,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:g},null,40,qe),[[$,o(f)]]),t("span",Fe,[q(c(l)+" ",1),t("span",je,"("+c(Z(l))+")",1)])]))),128))])]),t("div",Ne,[e[18]||(e[18]=t("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Availability",-1)),t("div",Ae,[t("label",Ie,[p(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>y(_)?_.value=l:null),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:g},null,544),[[$,o(_)]]),e[16]||(e[16]=t("span",{class:"ml-2 text-sm text-gray-700"},"In Stock Only",-1))]),t("label",De,[p(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>y(k)?k.value=l:null),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onChange:g},null,544),[[$,o(k)]]),e[17]||(e[17]=t("span",{class:"ml-2 text-sm text-gray-700"},"Prescription Required",-1))])])]),t("button",{onClick:E,class:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Clear All Filters ")])]),t("div",He,[o(P)?(a(),r("div",Oe,e[20]||(e[20]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):o(b).length===0?(a(),r("div",ze,e[21]||(e[21]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No products found",-1),t("p",{class:"mt-1 text-sm text-gray-500"}," Try adjusting your search criteria or filters ",-1)]))):(a(),r("div",Ee,[t("div",Te,[(a(!0),r(C,null,S(o(H),l=>(a(),le(ae,{key:l.id,product:l,"show-add-to-cart":!0},null,8,["product"]))),128))]),o(m)<o(b).length?(a(),r("div",Ke,[t("button",{onClick:T,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium"}," Load More Products ")])):se("",!0)]))])])])):(a(),r("div",Ze,e[22]||(e[22]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Search for products",-1),t("p",{class:"mt-1 text-sm text-gray-500"}," Enter a search term to find medications, supplements, and health products ",-1)])))])]))}};export{Xe as default};
