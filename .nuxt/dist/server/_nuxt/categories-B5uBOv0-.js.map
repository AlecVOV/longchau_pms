{"version":3,"file":"categories-B5uBOv0-.js","sources":["../../../../pages/admin/categories.vue"],"sourcesContent":["<template>\r\n  <div class=\"py-8\">\r\n    <div class=\"container mx-auto px-4\">\r\n      <!-- Header -->\r\n      <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8\">\r\n        <div>\r\n          <h1 class=\"text-3xl font-bold text-gray-900\">Category Management</h1>\r\n          <p class=\"text-gray-600 mt-2\">Manage product categories and organization</p>\r\n        </div>\r\n        <div class=\"mt-4 sm:mt-0 space-x-4\">\r\n          <button\r\n            @click=\"showAddCategoryModal = true\"\r\n            class=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n          >\r\n            Add New Category\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Categories Grid -->\r\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\r\n        <div\r\n          v-for=\"category in categories\"\r\n          :key=\"category.id\"\r\n          class=\"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow\"\r\n        >\r\n          <div class=\"aspect-video bg-gray-100 rounded-t-lg overflow-hidden\">\r\n            <img\r\n              :src=\"category.image || '/placeholder-category.jpg'\"\r\n              :alt=\"category.name\"\r\n              class=\"w-full h-full object-cover\"\r\n            >\r\n          </div>\r\n          <div class=\"p-6\">\r\n            <div class=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">{{ category.name }}</h3>\r\n                <p class=\"text-sm text-gray-600\">{{ category.description }}</p>\r\n              </div>\r\n              <div class=\"flex space-x-2\">\r\n                <button\r\n                  @click=\"editCategory(category)\"\r\n                  class=\"text-blue-600 hover:text-blue-800 p-1\"\r\n                  title=\"Edit Category\"\r\n                >\r\n                  <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"></path>\r\n                  </svg>\r\n                </button>\r\n                <button\r\n                  @click=\"deleteCategory(category)\"\r\n                  class=\"text-red-600 hover:text-red-800 p-1\"\r\n                  title=\"Delete Category\"\r\n                >\r\n                  <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"flex items-center justify-between text-sm text-gray-500\">\r\n              <span>{{ category.productCount || 0 }} products</span>\r\n              <NuxtLink \r\n                :to=\"`/category/${category.slug}`\"\r\n                class=\"text-blue-600 hover:text-blue-800 font-medium\"\r\n              >\r\n                View Products â†’\r\n              </NuxtLink>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Category Statistics -->\r\n      <div class=\"bg-white rounded-lg shadow-sm border p-6\">\r\n        <h2 class=\"text-xl font-bold text-gray-900 mb-6\">Category Statistics</h2>\r\n        <div class=\"overflow-x-auto\">\r\n          <table class=\"min-w-full divide-y divide-gray-200\">\r\n            <thead class=\"bg-gray-50\">\r\n              <tr>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Category\r\n                </th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Products\r\n                </th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  In Stock\r\n                </th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Low Stock\r\n                </th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Out of Stock\r\n                </th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n              <tr v-for=\"category in categories\" :key=\"category.id\" class=\"hover:bg-gray-50\">\r\n                <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div class=\"flex items-center\">\r\n                    <div class=\"flex-shrink-0 h-10 w-10\">\r\n                      <img\r\n                        :src=\"category.image || '/placeholder-category.jpg'\"\r\n                        :alt=\"category.name\"\r\n                        class=\"h-10 w-10 rounded-lg object-cover\"\r\n                      >\r\n                    </div>\r\n                    <div class=\"ml-4\">\r\n                      <div class=\"text-sm font-medium text-gray-900\">{{ category.name }}</div>\r\n                      <div class=\"text-sm text-gray-500\">{{ category.slug }}</div>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                  {{ getCategoryStats(category.id).totalProducts }}\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                  <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                    {{ getCategoryStats(category.id).inStock }}\r\n                  </span>\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                  <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                    {{ getCategoryStats(category.id).lowStock }}\r\n                  </span>\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                  <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800\">\r\n                    {{ getCategoryStats(category.id).outOfStock }}\r\n                  </span>\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                  <div class=\"flex space-x-2\">\r\n                    <NuxtLink\r\n                      :to=\"`/admin/products?category=${category.id}`\"\r\n                      class=\"text-blue-600 hover:text-blue-900\"\r\n                    >\r\n                      Manage Products\r\n                    </NuxtLink>\r\n                    <button\r\n                      @click=\"editCategory(category)\"\r\n                      class=\"text-indigo-600 hover:text-indigo-900\"\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Add/Edit Category Modal -->\r\n    <div v-if=\"showAddCategoryModal || showEditCategoryModal\" class=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div class=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n        <div class=\"fixed inset-0 transition-opacity\" aria-hidden=\"true\">\r\n          <div class=\"absolute inset-0 bg-gray-500 opacity-75\" @click=\"closeModal\"></div>\r\n        </div>\r\n\r\n        <div class=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\">\r\n          <form @submit.prevent=\"saveCategory\">\r\n            <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n              <div class=\"sm:flex sm:items-start\">\r\n                <div class=\"mt-3 text-center sm:mt-0 sm:text-left w-full\">\r\n                  <h3 class=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\r\n                    {{ showEditCategoryModal ? 'Edit Category' : 'Add New Category' }}\r\n                  </h3>\r\n                  <div class=\"space-y-4\">\r\n                    <div>\r\n                      <label class=\"block text-sm font-medium text-gray-700 mb-2\">Category Name</label>\r\n                      <input\r\n                        v-model=\"categoryForm.name\"\r\n                        type=\"text\"\r\n                        required\r\n                        class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"Enter category name\"\r\n                      >\r\n                    </div>\r\n                    <div>\r\n                      <label class=\"block text-sm font-medium text-gray-700 mb-2\">Slug</label>\r\n                      <input\r\n                        v-model=\"categoryForm.slug\"\r\n                        type=\"text\"\r\n                        required\r\n                        class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"category-slug\"\r\n                      >\r\n                    </div>\r\n                    <div>\r\n                      <label class=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\r\n                      <textarea\r\n                        v-model=\"categoryForm.description\"\r\n                        rows=\"3\"\r\n                        class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"Enter category description\"\r\n                      ></textarea>\r\n                    </div>\r\n                    <div>\r\n                      <label class=\"block text-sm font-medium text-gray-700 mb-2\">Image URL</label>\r\n                      <input\r\n                        v-model=\"categoryForm.image\"\r\n                        type=\"url\"\r\n                        class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"https://example.com/image.jpg\"\r\n                      >\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\">\r\n              <button\r\n                type=\"submit\"\r\n                class=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm\"\r\n              >\r\n                {{ showEditCategoryModal ? 'Update Category' : 'Add Category' }}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                @click=\"closeModal\"\r\n                class=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useProductsStore } from '~/stores/products'\r\n\r\ndefinePageMeta({\r\n  middleware: 'admin'\r\n})\r\n\r\nconst productsStore = useProductsStore()\r\n\r\n// Reactive data\r\nconst showAddCategoryModal = ref(false)\r\nconst showEditCategoryModal = ref(false)\r\nconst selectedCategory = ref(null)\r\n\r\nconst categoryForm = ref({\r\n  name: '',\r\n  slug: '',\r\n  description: '',\r\n  image: ''\r\n})\r\n\r\n// Computed properties\r\nconst categories = computed(() => productsStore.categories)\r\nconst products = computed(() => productsStore.products)\r\n\r\n// Methods\r\nconst getCategoryStats = (categoryId) => {\r\n  const categoryProducts = products.value.filter(p => p.categoryId === categoryId)\r\n  \r\n  return {\r\n    totalProducts: categoryProducts.length,\r\n    inStock: categoryProducts.filter(p => p.stock > 10).length,\r\n    lowStock: categoryProducts.filter(p => p.stock > 0 && p.stock <= 10).length,\r\n    outOfStock: categoryProducts.filter(p => p.stock === 0).length\r\n  }\r\n}\r\n\r\nconst editCategory = (category) => {\r\n  selectedCategory.value = category\r\n  categoryForm.value = {\r\n    name: category.name,\r\n    slug: category.slug,\r\n    description: category.description || '',\r\n    image: category.image || ''\r\n  }\r\n  showEditCategoryModal.value = true\r\n}\r\n\r\nconst closeModal = () => {\r\n  showAddCategoryModal.value = false\r\n  showEditCategoryModal.value = false\r\n  selectedCategory.value = null\r\n  categoryForm.value = {\r\n    name: '',\r\n    slug: '',\r\n    description: '',\r\n    image: ''\r\n  }\r\n}\r\n\r\nconst saveCategory = async () => {\r\n  try {\r\n    if (showEditCategoryModal.value && selectedCategory.value) {\r\n      await productsStore.updateCategory(selectedCategory.value.id, categoryForm.value)\r\n    } else {\r\n      await productsStore.addCategory(categoryForm.value)\r\n    }\r\n    closeModal()\r\n    // Success feedback could be added here\r\n  } catch (error) {\r\n    console.error('Failed to save category:', error)\r\n    // Error feedback could be added here\r\n  }\r\n}\r\n\r\nconst deleteCategory = async (category) => {\r\n  const stats = getCategoryStats(category.id)\r\n  \r\n  if (stats.totalProducts > 0) {\r\n    if (!confirm(`This category contains ${stats.totalProducts} products. Are you sure you want to delete it? The products will need to be reassigned to other categories.`)) {\r\n      return\r\n    }\r\n  } else if (!confirm(`Are you sure you want to delete the category \"${category.name}\"?`)) {\r\n    return\r\n  }\r\n\r\n  try {\r\n    await productsStore.deleteCategory(category.id)\r\n    // Success feedback could be added here\r\n  } catch (error) {\r\n    console.error('Failed to delete category:', error)\r\n    // Error feedback could be added here\r\n  }\r\n}\r\n\r\n// Auto-generate slug from name\r\nwatch(() => categoryForm.value.name, (newName) => {\r\n  if (newName && !showEditCategoryModal.value) {\r\n    categoryForm.value.slug = newName\r\n      .toLowerCase()\r\n      .replace(/[^a-z0-9]+/g, '-')\r\n      .replace(/(^-|-$)/g, '')\r\n  }\r\n})\r\n\r\n// Load data on mount\r\nonMounted(async () => {\r\n  await Promise.all([\r\n    productsStore.fetchCategories(),\r\n    productsStore.fetchProducts()\r\n  ])\r\n})\r\n</script>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAsPA,UAAM,gBAAgB,iBAAkB;AAGxC,UAAM,uBAAuB,IAAI,KAAK;AACtC,UAAM,wBAAwB,IAAI,KAAK;AACd,QAAI,IAAI;AAEjC,UAAM,eAAe,IAAI;AAAA,MACvB,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,OAAO;AAAA,IACT,CAAC;AAGD,UAAM,aAAa,SAAS,MAAM,cAAc,UAAU;AAC1D,UAAM,WAAW,SAAS,MAAM,cAAc,QAAQ;AAGtD,UAAM,mBAAmB,CAAC,eAAe;AACvC,YAAM,mBAAmB,SAAS,MAAM,OAAO,OAAK,EAAE,eAAe,UAAU;AAE/E,aAAO;AAAA,QACL,eAAe,iBAAiB;AAAA,QAChC,SAAS,iBAAiB,OAAO,OAAK,EAAE,QAAQ,EAAE,EAAE;AAAA,QACpD,UAAU,iBAAiB,OAAO,OAAK,EAAE,QAAQ,KAAK,EAAE,SAAS,EAAE,EAAE;AAAA,QACrE,YAAY,iBAAiB,OAAO,OAAK,EAAE,UAAU,CAAC,EAAE;AAAA,MACzD;AAAA,IACH;AA6DA,UAAM,MAAM,aAAa,MAAM,MAAM,CAAC,YAAY;AAChD,UAAI,WAAW,CAAC,sBAAsB,OAAO;AAC3C,qBAAa,MAAM,OAAO,QACvB,YAAa,EACb,QAAQ,eAAe,GAAG,EAC1B,QAAQ,YAAY,EAAE;AAAA,MAC1B;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}