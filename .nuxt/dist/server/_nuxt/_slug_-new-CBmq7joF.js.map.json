{"file":"_slug_-new-CBmq7joF.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAoOc,aAAU;AACT,cAAW;AACJ,qBAAkB;AACxC,UAAM,YAAY,aAAc;AAEhC,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,gBAAgB,IAAI,EAAE;AAC5B,UAAM,WAAW,IAAI,CAAC;AACtB,UAAM,kBAAkB,IAAI,EAAE;AAE9B,UAAM,kBAAkB,SAAS,MAAM;;AACrC,YAAI,aAAQ,UAAR,mBAAe,YAAW,GAAG;AAC/B,eAAO,QAAQ,MAAM,SAAS,IAAI,QAAQ,MAAM,WAAW;AAAA,MAC5D;AACD,eAAO,aAAQ,UAAR,mBAAe,UAAS;AAAA,IACjC,CAAC;AAcD,UAAM,YAAY,MAAM;AACtB,gBAAU,QAAQ,QAAQ,OAAO,SAAS,KAAK;AAAA,IAEjD;AAuCA,YAAQ;AAAA,MACN,OAAO,MAAM,QAAQ,QAAQ,GAAG,QAAQ,MAAM,IAAI,iBAAiB;AAAA,MACnE,MAAM;AAAA,QACJ;AAAA,UACE,MAAM;AAAA,UACN,SAAS,MAAM;;AAAA,kCAAQ,UAAR,mBAAe,gBAAe;AAAA;AAAA,QAC9C;AAAA,QACD;AAAA,UACE,UAAU;AAAA,UACV,SAAS,MAAM,QAAQ,QAAQ,GAAG,QAAQ,MAAM,IAAI,iBAAiB;AAAA,QACtE;AAAA,QACD;AAAA,UACE,UAAU;AAAA,UACV,SAAS,MAAM;;AAAA,kCAAQ,UAAR,mBAAe,gBAAe;AAAA;AAAA,QAC9C;AAAA,QACD;AAAA,UACE,UAAU;AAAA,UACV,SAAS,MAAM;;AAAA,kCAAQ,UAAR,mBAAe,UAAS;AAAA;AAAA,QACxC;AAAA,MACF;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/product/[slug]-new.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"loading\" class=\"flex justify-center items-center min-h-screen\">\r\n    <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n  </div>\r\n\r\n  <div v-else-if=\"product\" class=\"py-8 md:py-12\">\r\n    <div class=\"container mx-auto px-4\">\r\n      <!-- Breadcrumb -->\r\n      <nav class=\"flex mb-8\" aria-label=\"Breadcrumb\">\r\n        <ol class=\"inline-flex items-center space-x-1 md:space-x-3\">\r\n          <li class=\"inline-flex items-center\">\r\n            <NuxtLink to=\"/\" class=\"text-gray-500 hover:text-gray-700\">Home</NuxtLink>\r\n          </li>\r\n          <li>\r\n            <div class=\"flex items-center\">\r\n              <svg class=\"w-6 h-6 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\"></path>\r\n              </svg>\r\n              <NuxtLink to=\"/products\" class=\"ml-1 text-gray-500 hover:text-gray-700 md:ml-2\">Products</NuxtLink>\r\n            </div>\r\n          </li>\r\n          <li v-if=\"product.category\">\r\n            <div class=\"flex items-center\">\r\n              <svg class=\"w-6 h-6 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\"></path>\r\n              </svg>\r\n              <NuxtLink :to=\"`/category/${product.category.slug}`\" class=\"ml-1 text-gray-500 hover:text-gray-700 md:ml-2\">\r\n                {{ product.category.name }}\r\n              </NuxtLink>\r\n            </div>\r\n          </li>\r\n          <li>\r\n            <div class=\"flex items-center\">\r\n              <svg class=\"w-6 h-6 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\"></path>\r\n              </svg>\r\n              <span class=\"ml-1 text-gray-500 md:ml-2\">{{ product.name }}</span>\r\n            </div>\r\n          </li>\r\n        </ol>\r\n      </nav>\r\n\r\n      <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12\">\r\n        <!-- Product Images -->\r\n        <div class=\"space-y-4\">\r\n          <!-- Main Image -->\r\n          <div class=\"aspect-square bg-gray-100 rounded-lg overflow-hidden\">\r\n            <img\r\n              :src=\"selectedImage || product.image || '/placeholder-product.jpg'\"\r\n              :alt=\"product.name\"\r\n              class=\"w-full h-full object-cover\"\r\n            />\r\n          </div>\r\n\r\n          <!-- Image Thumbnails -->\r\n          <div v-if=\"product.images && product.images.length > 1\" class=\"flex space-x-2 overflow-x-auto\">\r\n            <button\r\n              v-for=\"(image, index) in product.images\"\r\n              :key=\"index\"\r\n              @click=\"selectedImage = image\"\r\n              :class=\"{ 'ring-2 ring-blue-500': selectedImage === image }\"\r\n              class=\"flex-shrink-0 w-20 h-20 bg-gray-100 rounded-lg overflow-hidden hover:ring-2 hover:ring-gray-300\"\r\n            >\r\n              <img :src=\"image\" :alt=\"`${product.name} ${index + 1}`\" class=\"w-full h-full object-cover\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Product Details -->\r\n        <div class=\"space-y-6\">\r\n          <!-- Product Name and Brand -->\r\n          <div>\r\n            <h1 class=\"text-3xl font-bold text-gray-900\">{{ product.name }}</h1>\r\n            <p v-if=\"product.brand\" class=\"text-lg text-gray-600 mt-2\">{{ product.brand }}</p>\r\n          </div>\r\n\r\n          <!-- Rating and Reviews -->\r\n          <div class=\"flex items-center space-x-4\">\r\n            <div class=\"flex items-center\">\r\n              <div class=\"flex items-center\">\r\n                <svg\r\n                  v-for=\"i in 5\"\r\n                  :key=\"i\"\r\n                  :class=\"i <= (product.rating || 0) ? 'text-yellow-400' : 'text-gray-300'\"\r\n                  class=\"w-5 h-5\"\r\n                  fill=\"currentColor\"\r\n                  viewBox=\"0 0 20 20\"\r\n                >\r\n                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                </svg>\r\n              </div>\r\n              <span class=\"ml-2 text-sm text-gray-600\">{{ product.rating || 0 }} ({{ product.reviewCount || 0 }} reviews)</span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Price -->\r\n          <div class=\"space-y-2\">\r\n            <div v-if=\"product.discount > 0\" class=\"flex items-baseline space-x-3\">\r\n              <span class=\"text-3xl font-bold text-green-600\">${{ discountedPrice.toFixed(2) }}</span>\r\n              <span class=\"text-xl text-gray-500 line-through\">${{ product.price.toFixed(2) }}</span>\r\n              <span class=\"px-3 py-1 bg-red-100 text-red-800 text-sm font-medium rounded-full\">\r\n                {{ product.discount }}% OFF\r\n              </span>\r\n            </div>\r\n            <div v-else class=\"text-3xl font-bold text-gray-900\">\r\n              ${{ product.price.toFixed(2) }}\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Stock Status -->\r\n          <div class=\"flex items-center space-x-4\">\r\n            <div v-if=\"product.stock > 0\" class=\"flex items-center text-green-600\">\r\n              <svg class=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\" />\r\n              </svg>\r\n              <span class=\"font-medium\">{{ product.stock }} in stock</span>\r\n            </div>\r\n            <div v-else class=\"flex items-center text-red-600\">\r\n              <svg class=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\r\n              </svg>\r\n              <span class=\"font-medium\">Out of stock</span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Product Alerts -->\r\n          <div class=\"space-y-2\">\r\n            <div v-if=\"product.prescriptionRequired\" class=\"flex items-center p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n              <svg class=\"w-5 h-5 text-red-600 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\" />\r\n              </svg>\r\n              <span class=\"text-red-800 text-sm font-medium\">Prescription required for this medication</span>\r\n            </div>\r\n            \r\n            <div v-if=\"product.stock <= 5 && product.stock > 0\" class=\"flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n              <svg class=\"w-5 h-5 text-yellow-600 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\" />\r\n              </svg>\r\n              <span class=\"text-yellow-800 text-sm font-medium\">Only {{ product.stock }} left in stock</span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Quantity and Add to Cart -->\r\n          <div v-if=\"product.stock > 0\" class=\"space-y-4\">\r\n            <div class=\"flex items-center space-x-4\">\r\n              <label class=\"text-sm font-medium text-gray-700\">Quantity:</label>\r\n              <div class=\"flex items-center border border-gray-300 rounded-lg\">\r\n                <button\r\n                  @click=\"decreaseQuantity\"\r\n                  :disabled=\"quantity <= 1\"\r\n                  class=\"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50\"\r\n                >\r\n                  -\r\n                </button>\r\n                <input\r\n                  v-model.number=\"quantity\"\r\n                  type=\"number\"\r\n                  :min=\"1\"\r\n                  :max=\"product.stock\"\r\n                  class=\"w-16 px-2 py-2 text-center border-0 focus:ring-0\"\r\n                />\r\n                <button\r\n                  @click=\"increaseQuantity\"\r\n                  :disabled=\"quantity >= product.stock\"\r\n                  class=\"px-3 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50\"\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex space-x-4\">\r\n              <button\r\n                @click=\"addToCart\"\r\n                class=\"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\r\n              >\r\n                Add to Cart\r\n              </button>\r\n              <button\r\n                @click=\"buyNow\"\r\n                class=\"flex-1 bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\r\n              >\r\n                Buy Now\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Product Information -->\r\n          <div class=\"mt-8 space-y-6\">\r\n            <div>\r\n              <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Product Description</h3>\r\n              <p class=\"text-gray-700\">{{ product.description }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Related Products -->\r\n      <div v-if=\"relatedProducts.length > 0\" class=\"mt-16\">\r\n        <h2 class=\"text-2xl font-bold text-gray-900 mb-8\">Related Products</h2>\r\n        <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n          <ProductCard\r\n            v-for=\"relatedProduct in relatedProducts\"\r\n            :key=\"relatedProduct.id\"\r\n            :product=\"relatedProduct\"\r\n            @add-to-cart=\"addToCart\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Product Not Found -->\r\n  <div v-else class=\"py-16 text-center\">\r\n    <div class=\"max-w-md mx-auto\">\r\n      <h1 class=\"text-2xl font-bold text-gray-900 mb-4\">Product Not Found</h1>\r\n      <p class=\"text-gray-600 mb-8\">The product you're looking for doesn't exist or has been removed.</p>\r\n      <NuxtLink to=\"/products\" class=\"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700\">\r\n        Browse Products\r\n      </NuxtLink>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useProductsStore } from '~/stores/products'\r\nimport { useCartStore } from '~/stores/cart'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst productsStore = useProductsStore()\r\nconst cartStore = useCartStore()\r\n\r\nconst loading = ref(true)\r\nconst product = ref(null)\r\nconst selectedImage = ref('')\r\nconst quantity = ref(1)\r\nconst relatedProducts = ref([])\r\n\r\nconst discountedPrice = computed(() => {\r\n  if (product.value?.discount > 0) {\r\n    return product.value.price * (1 - product.value.discount / 100)\r\n  }\r\n  return product.value?.price || 0\r\n})\r\n\r\nconst increaseQuantity = () => {\r\n  if (quantity.value < product.value.stock) {\r\n    quantity.value++\r\n  }\r\n}\r\n\r\nconst decreaseQuantity = () => {\r\n  if (quantity.value > 1) {\r\n    quantity.value--\r\n  }\r\n}\r\n\r\nconst addToCart = () => {\r\n  cartStore.addItem(product.value, quantity.value)\r\n  // Show success message\r\n}\r\n\r\nconst buyNow = () => {\r\n  cartStore.addItem(product.value, quantity.value)\r\n  router.push('/checkout')\r\n}\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const slug = route.params.slug\r\n    \r\n    // Fetch product details\r\n    const fetchedProduct = await productsStore.fetchProductById(slug)\r\n    product.value = fetchedProduct\r\n    \r\n    // Set default selected image\r\n    if (product.value.images && product.value.images.length > 0) {\r\n      selectedImage.value = product.value.images[0]\r\n    } else {\r\n      selectedImage.value = product.value.image\r\n    }\r\n    \r\n    // Add to recently viewed\r\n    productsStore.addToRecentlyViewed(product.value)\r\n    \r\n    // Fetch related products\r\n    if (product.value.category) {\r\n      const categoryProducts = await productsStore.getProductsByCategory(product.value.category.id)\r\n      relatedProducts.value = categoryProducts.filter(p => p.id !== product.value.id).slice(0, 4)\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('Error fetching product:', error)\r\n    // Product not found, will show 404 message\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n})\r\n\r\nuseHead({\r\n  title: () => product.value ? `${product.value.name} - Long Châu` : 'Product Not Found - Long Châu',\r\n  meta: [\r\n    {\r\n      name: 'description',\r\n      content: () => product.value?.description || 'Product not found'\r\n    },\r\n    {\r\n      property: 'og:title',\r\n      content: () => product.value ? `${product.value.name} - Long Châu` : 'Product Not Found'\r\n    },\r\n    {\r\n      property: 'og:description',\r\n      content: () => product.value?.description || 'Product not found'\r\n    },\r\n    {\r\n      property: 'og:image',\r\n      content: () => product.value?.image || '/placeholder-product.jpg'\r\n    }\r\n  ]\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.animate-spin {\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  from { transform: rotate(0deg); }\r\n  to { transform: rotate(360deg); }\r\n}\r\n</style>\r\n"],"version":3}