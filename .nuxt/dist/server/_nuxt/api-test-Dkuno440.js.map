{"version":3,"file":"api-test-Dkuno440.js","sources":["../../../../pages/api-test.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-50 py-8\">\r\n    <div class=\"max-w-4xl mx-auto px-4\">\r\n      <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">üß™ Backend API Testing</h1>\r\n      \r\n      <!-- API Status -->\r\n      <div class=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n        <h2 class=\"text-xl font-semibold mb-4\">üîÑ API Status</h2>\r\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div class=\"text-center\">\r\n            <div class=\"text-2xl mb-2\">üóÑÔ∏è</div>\r\n            <div class=\"text-sm text-gray-600\">Database</div>\r\n            <div class=\"font-semibold text-green-600\">Connected</div>\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <div class=\"text-2xl mb-2\">üîê</div>\r\n            <div class=\"text-sm text-gray-600\">Authentication</div>\r\n            <div class=\"font-semibold text-green-600\">Active</div>\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <div class=\"text-2xl mb-2\">üõí</div>\r\n            <div class=\"text-sm text-gray-600\">Products API</div>\r\n            <div class=\"font-semibold text-green-600\">Working</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Products Test -->\r\n      <div class=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n        <h2 class=\"text-xl font-semibold mb-4\">üè• Products from Database</h2>\r\n        <div v-if=\"loading\" class=\"text-center py-4\">\r\n          <div class=\"animate-spin inline-block w-6 h-6 border-4 border-blue-600 border-t-transparent rounded-full\"></div>\r\n          <p class=\"mt-2\">Loading products...</p>\r\n        </div>\r\n        <div v-else-if=\"error\" class=\"bg-red-50 border border-red-200 rounded p-4 text-red-700\">\r\n          <strong>Error:</strong> {{ error }}\r\n        </div>\r\n        <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          <div v-for=\"product in products\" :key=\"product.id\" class=\"border rounded-lg p-4\">\r\n            <h3 class=\"font-semibold\">{{ product.name }}</h3>\r\n            <p class=\"text-sm text-gray-600 mb-2\">{{ product.shortDescription }}</p>\r\n            <div class=\"flex justify-between items-center\">\r\n              <span class=\"text-lg font-bold text-green-600\">${{ product.price }}</span>\r\n              <span class=\"text-sm text-gray-500\">Stock: {{ product.stock }}</span>\r\n            </div>\r\n            <div class=\"mt-2\">\r\n              <span class=\"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded\">\r\n                {{ product.category?.name }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Categories Test -->\r\n      <div class=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n        <h2 class=\"text-xl font-semibold mb-4\">üì¶ Categories from Database</h2>\r\n        <div v-if=\"categoriesLoading\" class=\"text-center py-4\">\r\n          <div class=\"animate-spin inline-block w-6 h-6 border-4 border-blue-600 border-t-transparent rounded-full\"></div>\r\n          <p class=\"mt-2\">Loading categories...</p>\r\n        </div>\r\n        <div v-else class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\r\n          <div v-for=\"category in categories\" :key=\"category.id\" class=\"text-center p-4 border rounded-lg\">\r\n            <div class=\"text-2xl mb-2\">üè∑Ô∏è</div>\r\n            <h3 class=\"font-semibold text-sm\">{{ category.name }}</h3>\r\n            <p class=\"text-xs text-gray-500 mt-1\">{{ category.slug }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Authentication Test -->\r\n      <div class=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 class=\"text-xl font-semibold mb-4\">üîê Authentication Test</h2>\r\n        <div v-if=\"!authStore.isLoggedIn\" class=\"space-y-4\">\r\n          <p class=\"text-gray-600\">Test login with sample credentials:</p>\r\n          <div class=\"bg-gray-50 p-4 rounded\">\r\n            <p><strong>Customer:</strong> customer@example.com / customer123</p>\r\n            <p><strong>Admin:</strong> admin@pharmacy.com / admin123</p>\r\n          </div>\r\n          <NuxtLink to=\"/login\" class=\"inline-block bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700\">\r\n            Go to Login Page\r\n          </NuxtLink>\r\n        </div>\r\n        <div v-else class=\"space-y-4\">\r\n          <div class=\"bg-green-50 border border-green-200 rounded p-4\">\r\n            <p class=\"text-green-800\">‚úÖ You are logged in as: <strong>{{ authStore.user?.email }}</strong></p>\r\n            <p class=\"text-green-700\">Role: <strong>{{ authStore.user?.role }}</strong></p>\r\n          </div>\r\n          <button @click=\"logout\" class=\"bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700\">\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Backend Summary -->\r\n      <div class=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mt-6\">\r\n        <h2 class=\"text-xl font-semibold mb-4 text-blue-900\">üìä Phase 1 Backend Summary</h2>\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm\">\r\n          <div>\r\n            <h3 class=\"font-semibold text-blue-800 mb-2\">‚úÖ Completed Features:</h3>\r\n            <ul class=\"space-y-1 text-blue-700\">\r\n              <li>‚Ä¢ SQLite Database with Prisma ORM</li>\r\n              <li>‚Ä¢ JWT Authentication System</li>\r\n              <li>‚Ä¢ Products & Categories API</li>\r\n              <li>‚Ä¢ User Management (Admin/Customer)</li>\r\n              <li>‚Ä¢ Cart & Order Models</li>\r\n              <li>‚Ä¢ Database Seeding</li>\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <h3 class=\"font-semibold text-blue-800 mb-2\">üìä Database Stats:</h3>\r\n            <ul class=\"space-y-1 text-blue-700\">\r\n              <li>‚Ä¢ Products: {{ products?.length || 0 }}</li>\r\n              <li>‚Ä¢ Categories: {{ categories?.length || 0 }}</li>\r\n              <li>‚Ä¢ Users: 2 (1 admin, 1 customer)</li>\r\n              <li>‚Ä¢ Authentication: JWT-based</li>\r\n              <li>‚Ä¢ Database: SQLite (dev.db)</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// Page meta\r\ndefinePageMeta({\r\n  layout: 'default'\r\n})\r\n\r\n// Stores\r\nconst authStore = useAuthStore()\r\n\r\n// Reactive data\r\nconst products = ref([])\r\nconst categories = ref([])\r\nconst loading = ref(true)\r\nconst categoriesLoading = ref(true)\r\nconst error = ref(null)\r\n\r\n// Fetch products on mount\r\nonMounted(async () => {\r\n  try {\r\n    // Fetch products\r\n    const { data: productsData } = await $fetch('/api/products')\r\n    products.value = productsData?.products || productsData || []\r\n  } catch (err) {\r\n    error.value = err.message || 'Failed to fetch products'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n\r\n  try {\r\n    // Fetch categories\r\n    const { data: categoriesData } = await $fetch('/api/categories')\r\n    categories.value = categoriesData?.categories || categoriesData || []\r\n  } catch (err) {\r\n    console.error('Failed to fetch categories:', err)\r\n  } finally {\r\n    categoriesLoading.value = false\r\n  }\r\n})\r\n\r\n// Logout function\r\nconst logout = async () => {\r\n  try {\r\n    await authStore.logout()\r\n    await navigateTo('/')\r\n  } catch (error) {\r\n    console.error('Logout error:', error)\r\n  }\r\n}\r\n</script>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAoIA,UAAM,YAAY,aAAc;AAGhC,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,aAAa,IAAI,EAAE;AACzB,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,oBAAoB,IAAI,IAAI;AAClC,UAAM,QAAQ,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}