{"version":3,"file":"addresses-Cv-RKmRP.js","sources":["../../../../pages/account/addresses.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-50\">\r\n    <!-- Header -->\r\n    <div class=\"bg-white shadow-sm\">\r\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div class=\"py-6\">\r\n          <div class=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 class=\"text-3xl font-bold text-gray-900\">Shipping Addresses</h1>\r\n              <p class=\"mt-1 text-sm text-gray-500\">Manage your delivery addresses</p>\r\n            </div>\r\n            <button @click=\"showAddForm = true\" \r\n                    class=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700\">\r\n              <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\r\n              </svg>\r\n              Add New Address\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <!-- Add/Edit Address Form -->\r\n      <div v-if=\"showAddForm || editingAddress\" class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\r\n        <div class=\"flex items-center justify-between mb-6\">\r\n          <h2 class=\"text-xl font-semibold text-gray-900\">\r\n            {{ editingAddress ? 'Edit Address' : 'Add New Address' }}\r\n          </h2>\r\n          <button @click=\"cancelForm\" \r\n                  class=\"text-gray-400 hover:text-gray-600\">\r\n            <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <form @submit.prevent=\"saveAddress\" class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <!-- Address Type -->\r\n          <div class=\"md:col-span-2\">\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Address Type</label>\r\n            <div class=\"flex space-x-4\">\r\n              <label class=\"flex items-center\">\r\n                <input v-model=\"addressForm.type\" type=\"radio\" value=\"home\" class=\"mr-2\">\r\n                <span class=\"text-sm text-gray-700\">Home</span>\r\n              </label>\r\n              <label class=\"flex items-center\">\r\n                <input v-model=\"addressForm.type\" type=\"radio\" value=\"work\" class=\"mr-2\">\r\n                <span class=\"text-sm text-gray-700\">Work</span>\r\n              </label>\r\n              <label class=\"flex items-center\">\r\n                <input v-model=\"addressForm.type\" type=\"radio\" value=\"other\" class=\"mr-2\">\r\n                <span class=\"text-sm text-gray-700\">Other</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Name -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Full Name *</label>\r\n            <input v-model=\"addressForm.name\" type=\"text\" required\r\n                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\">\r\n          </div>\r\n\r\n          <!-- Phone -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Phone Number *</label>\r\n            <input v-model=\"addressForm.phone\" type=\"tel\" required\r\n                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\">\r\n          </div>\r\n\r\n          <!-- Address Line 1 -->\r\n          <div class=\"md:col-span-2\">\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Address Line 1 *</label>\r\n            <input v-model=\"addressForm.line1\" type=\"text\" required \r\n                   placeholder=\"Street address, P.O. box, company name\"\r\n                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\">\r\n          </div>\r\n\r\n          <!-- Address Line 2 -->\r\n          <div class=\"md:col-span-2\">\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Address Line 2</label>\r\n            <input v-model=\"addressForm.line2\" type=\"text\" \r\n                   placeholder=\"Apartment, suite, unit, building, floor, etc.\"\r\n                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\">\r\n          </div>\r\n\r\n          <!-- City -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">City *</label>\r\n            <input v-model=\"addressForm.city\" type=\"text\" required\r\n                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\">\r\n          </div>\r\n\r\n          <!-- Postal Code -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Postal Code *</label>\r\n            <input v-model=\"addressForm.zipCode\" type=\"text\" required \r\n                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\">\r\n          </div>\r\n\r\n          <!-- Country -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Country *</label>\r\n            <select v-model=\"addressForm.country\" required\r\n                    class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\">\r\n              <option value=\"VN\">Vietnam</option>\r\n            </select>\r\n          </div>\r\n\r\n          <!-- Default Address -->\r\n          <div class=\"md:col-span-2\">\r\n            <label class=\"flex items-center\">\r\n              <input v-model=\"addressForm.isDefault\" type=\"checkbox\" class=\"mr-2\">\r\n              <span class=\"text-sm text-gray-700\">Set as default shipping address</span>\r\n            </label>\r\n          </div>\r\n\r\n          <!-- Form Actions -->\r\n          <div class=\"md:col-span-2 flex justify-end space-x-3 pt-4 border-t border-gray-200\">\r\n            <button type=\"button\" @click=\"cancelForm\" \r\n                    class=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\">\r\n              Cancel\r\n            </button>\r\n            <button type=\"submit\" :disabled=\"saving\"\r\n                    class=\"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50\">\r\n              {{ saving ? 'Saving...' : (editingAddress ? 'Update Address' : 'Save Address') }}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <!-- Addresses Grid -->\r\n      <div v-if=\"addresses.length === 0 && !showAddForm\" class=\"bg-white rounded-lg shadow-sm p-12 text-center\">\r\n        <svg class=\"w-16 h-16 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n        </svg>\r\n        <h3 class=\"text-lg font-medium text-gray-900 mb-2\">No addresses yet</h3>\r\n        <p class=\"text-gray-500 mb-6\">Add your first shipping address to get started.</p>\r\n        <button @click=\"showAddForm = true\" \r\n                class=\"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\">\r\n          Add Address\r\n        </button>\r\n      </div>\r\n\r\n      <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        <div v-for=\"address in addresses\" :key=\"address.id\" \r\n             class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 relative\">\r\n          \r\n          <!-- Default Badge -->\r\n          <div v-if=\"address.isDefault\" \r\n               class=\"absolute top-4 right-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n            Default\r\n          </div>\r\n\r\n          <!-- Address Type -->\r\n          <div class=\"flex items-center mb-4\">\r\n            <div class=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3\">\r\n              <svg v-if=\"address.type === 'home'\" class=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\r\n              </svg>\r\n              <svg v-else-if=\"address.type === 'work'\" class=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\r\n              </svg>\r\n              <svg v-else class=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n              </svg>\r\n            </div>\r\n            <div>\r\n              <h3 class=\"font-semibold text-gray-900 capitalize\">{{ address.type }}</h3>\r\n              <p class=\"text-sm text-gray-500\">{{ address.name }}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Address Details -->\r\n          <div class=\"text-sm text-gray-600 space-y-1 mb-4\">\r\n            <p>{{ address.line1 }}</p>\r\n            <p v-if=\"address.line2\">{{ address.line2 }}</p>\r\n            <p>{{ address.city }}, {{ address.state }} {{ address.zipCode }}</p>\r\n            <p>{{ address.country === 'US' ? 'United States' : address.country }}</p>\r\n            <p class=\"text-gray-500\">{{ address.phone }}</p>\r\n          </div>\r\n\r\n          <!-- Actions -->\r\n          <div class=\"flex items-center justify-between pt-4 border-t border-gray-200\">\r\n            <div class=\"flex space-x-2\">\r\n              <button @click=\"editAddress(address)\" \r\n                      class=\"text-sm text-blue-600 hover:text-blue-500 font-medium\">\r\n                Edit\r\n              </button>\r\n              <button v-if=\"!address.isDefault\" \r\n                      @click=\"setAsDefault(address)\" \r\n                      class=\"text-sm text-blue-600 hover:text-blue-500 font-medium\">\r\n                Set Default\r\n              </button>\r\n            </div>\r\n            <button @click=\"deleteAddress(address)\" \r\n                    class=\"text-sm text-red-600 hover:text-red-500 font-medium\">\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useAuthStore } from '~/stores/auth'\r\n\r\ndefinePageMeta({\r\n  middleware: 'auth'\r\n})\r\n\r\nuseHead({\r\n  title: 'Shipping Addresses - Long Châu',\r\n  meta: [\r\n    { name: 'description', content: 'Manage your shipping addresses for faster checkout and delivery.' }\r\n  ]\r\n})\r\n\r\nconst authStore = useAuthStore()\r\n\r\n// Reactive data\r\nconst showAddForm = ref(false)\r\nconst editingAddress = ref(null)\r\nconst saving = ref(false)\r\n\r\n// Address form\r\nconst addressForm = ref({\r\n  type: 'home',\r\n  name: '',\r\n  phone: '',\r\n  line1: '',\r\n  line2: '',\r\n  city: '',\r\n  zipCode: '',\r\n  country: 'VN',\r\n  isDefault: false\r\n})\r\n\r\n// Sample addresses - replace with API data\r\nconst addresses = ref([\r\n  // Start with empty array - no sample data to avoid persistence issues\r\n])\r\n\r\n// Methods\r\nconst saveAddress = async () => {\r\n  saving.value = true\r\n  try {\r\n    if (editingAddress.value) {\r\n      // Update existing address\r\n      const index = addresses.value.findIndex(addr => addr.id === editingAddress.value.id)\r\n      if (index !== -1) {\r\n        addresses.value[index] = { ...addressForm.value, id: editingAddress.value.id }\r\n      }\r\n    } else {\r\n      // Add new address\r\n      const newAddress = {\r\n        ...addressForm.value,\r\n        id: Date.now().toString()\r\n      }\r\n      addresses.value.push(newAddress)\r\n    }\r\n\r\n    // If this is set as default, remove default from others\r\n    if (addressForm.value.isDefault) {\r\n      addresses.value.forEach(addr => {\r\n        if (addr.id !== (editingAddress.value?.id || addresses.value[addresses.value.length - 1].id)) {\r\n          addr.isDefault = false\r\n        }\r\n      })\r\n    }\r\n\r\n    cancelForm()\r\n  } catch (error) {\r\n    console.error('Error saving address:', error)\r\n  } finally {\r\n    saving.value = false\r\n  }\r\n}\r\n\r\nconst editAddress = (address) => {\r\n  editingAddress.value = address\r\n  addressForm.value = { ...address }\r\n  showAddForm.value = false\r\n}\r\n\r\nconst deleteAddress = async (address) => {\r\n  if (confirm('Are you sure you want to delete this address?')) {\r\n    try {\r\n      const index = addresses.value.findIndex(addr => addr.id === address.id)\r\n      if (index !== -1) {\r\n        addresses.value.splice(index, 1)\r\n        \r\n        // If deleted address was default and there are remaining addresses, set first one as default\r\n        if (address.isDefault && addresses.value.length > 0) {\r\n          addresses.value[0].isDefault = true\r\n        }\r\n        \r\n        console.log('Address deleted successfully')\r\n      } else {\r\n        console.error('Address not found for deletion')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting address:', error)\r\n      alert('Failed to delete address. Please try again.')\r\n    }\r\n  }\r\n}\r\n\r\nconst setAsDefault = async (address) => {\r\n  // Remove default from all addresses\r\n  addresses.value.forEach(addr => {\r\n    addr.isDefault = addr.id === address.id\r\n  })\r\n}\r\n\r\nconst cancelForm = () => {\r\n  showAddForm.value = false\r\n  editingAddress.value = null\r\n  addressForm.value = {\r\n    type: 'home',\r\n    name: '',\r\n    phone: '',\r\n    line1: '',\r\n    line2: '',\r\n    city: '',\r\n    zipCode: '',\r\n    country: 'VN',\r\n    isDefault: false\r\n  }\r\n}\r\n\r\n// Initialize form with user data\r\nonMounted(() => {\r\n  if (authStore.user) {\r\n    addressForm.value.name = `${authStore.user.firstName} ${authStore.user.lastName}`.trim()\r\n    addressForm.value.phone = authStore.user.phone || ''\r\n  }\r\n})\r\n</script>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAwNA,YAAQ;AAAA,MACN,OAAO;AAAA,MACP,MAAM;AAAA,QACJ,EAAE,MAAM,eAAe,SAAS,mEAAoE;AAAA,MACrG;AAAA,IACH,CAAC;AAEiB,iBAAc;AAGhC,UAAM,cAAc,IAAI,KAAK;AAC7B,UAAM,iBAAiB,IAAI,IAAI;AAC/B,UAAM,SAAS,IAAI,KAAK;AAGxB,UAAM,cAAc,IAAI;AAAA,MACtB,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,MACT,SAAS;AAAA,MACT,WAAW;AAAA,IACb,CAAC;AAGD,UAAM,YAAY,IAAI;AAAA;AAAA,IAEtB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}