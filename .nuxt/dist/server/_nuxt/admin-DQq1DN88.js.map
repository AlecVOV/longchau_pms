{"version":3,"file":"admin-DQq1DN88.js","sources":["../../../../middleware/admin.js"],"sourcesContent":["import { useAuthStore } from '~/stores/auth'\r\n\r\nexport default defineNuxtRouteMiddleware((to, from) => {\r\n  // Skip middleware on server-side rendering\r\n  if (process.server) return\r\n\r\n  const authStore = useAuthStore()\r\n  \r\n  // Initialize auth if not already done\r\n  if (!authStore.isLoggedIn) {\r\n    authStore.initializeAuth()\r\n  }\r\n\r\n  // Check if user is authenticated\r\n  if (!authStore.isLoggedIn) {\r\n    return navigateTo({\r\n      path: '/login',\r\n      query: { redirect: to.fullPath, message: 'Please login to access admin area' }\r\n    })\r\n  }\r\n\r\n  // Check if session is valid\r\n  if (!authStore.isSessionValid) {\r\n    return navigateTo({\r\n      path: '/login',\r\n      query: { redirect: to.fullPath, message: 'Session expired. Please log in again.' }\r\n    })\r\n  }\r\n\r\n  // Check if user has admin role\r\n  if (authStore.getUserRole !== 'ADMIN') {\r\n    throw createError({\r\n      statusCode: 403,\r\n      statusMessage: 'Admin privileges required',\r\n      message: 'You need administrator access to view this page. Please login with an admin account.'\r\n    })\r\n  }\r\n})\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA,MAAA,QAAe,0BAA0B,CAAC,IAAI,SAAS;AAEjC;AAiCtB,CAAC;"}